(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Xt(e,t){const n=document.createElement("canvas");t.innerHTML="",t.appendChild(n);const r=n.getContext("webgl2");if(r===null)throw new Error("Error creating WebGL2 context.");const o=e(r),c=i=>{o(i),requestAnimationFrame(c)};requestAnimationFrame(c)}/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let ze=Float32Array;function J(e,t,n){const r=new ze(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function gn(e,t,n){return n=n||new ze(3),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Bt(e,t,n){n=n||new ze(3);const r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=r,n[2]=o,n}function Ke(e,t){t=t||new ze(3);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.sqrt(n);return r>1e-5?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}let F=Float32Array;function jn(e){const t=F;return F=e,t}function qn(e,t){return t=t||new F(16),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function Zn(){return new F(16).fill(0)}function Yt(e,t){return t=t||new F(16),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Wt(e){return e=e||new F(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jn(e,t){if(t=t||new F(16),t===e){let A;return A=e[1],e[1]=e[4],e[4]=A,A=e[2],e[2]=e[8],e[8]=A,A=e[3],e[3]=e[12],e[12]=A,A=e[6],e[6]=e[9],e[9]=A,A=e[7],e[7]=e[13],e[13]=A,A=e[11],e[11]=e[14],e[14]=A,t}const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],u=e[1*4+2],s=e[1*4+3],m=e[2*4+0],f=e[2*4+1],l=e[2*4+2],E=e[2*4+3],x=e[3*4+0],y=e[3*4+1],_=e[3*4+2],T=e[3*4+3];return t[0]=n,t[1]=i,t[2]=m,t[3]=x,t[4]=r,t[5]=a,t[6]=f,t[7]=y,t[8]=o,t[9]=u,t[10]=l,t[11]=_,t[12]=c,t[13]=s,t[14]=E,t[15]=T,t}function Kt(e,t){t=t||new F(16);const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],u=e[1*4+2],s=e[1*4+3],m=e[2*4+0],f=e[2*4+1],l=e[2*4+2],E=e[2*4+3],x=e[3*4+0],y=e[3*4+1],_=e[3*4+2],T=e[3*4+3],A=l*T,h=_*E,p=u*T,S=_*s,P=u*E,I=l*s,B=o*T,L=_*c,M=o*E,O=l*c,G=o*s,z=u*c,$=m*y,V=x*f,k=i*y,d=x*a,H=i*f,Fe=m*a,Se=n*y,ve=x*r,Ie=n*f,Pe=m*r,we=n*a,Ne=i*r,Nt=A*a+S*f+P*y-(h*a+p*f+I*y),Ut=h*r+B*f+O*y-(A*r+L*f+M*y),Ct=p*r+L*a+G*y-(S*r+B*a+z*y),Dt=I*r+M*a+z*f-(P*r+O*a+G*f),N=1/(n*Nt+i*Ut+m*Ct+x*Dt);return t[0]=N*Nt,t[1]=N*Ut,t[2]=N*Ct,t[3]=N*Dt,t[4]=N*(h*i+p*m+I*x-(A*i+S*m+P*x)),t[5]=N*(A*n+L*m+M*x-(h*n+B*m+O*x)),t[6]=N*(S*n+B*i+z*x-(p*n+L*i+G*x)),t[7]=N*(P*n+O*i+G*m-(I*n+M*i+z*m)),t[8]=N*($*s+d*E+H*T-(V*s+k*E+Fe*T)),t[9]=N*(V*c+Se*E+Pe*T-($*c+ve*E+Ie*T)),t[10]=N*(k*c+ve*s+we*T-(d*c+Se*s+Ne*T)),t[11]=N*(Fe*c+Ie*s+Ne*E-(H*c+Pe*s+we*E)),t[12]=N*(k*l+Fe*_+V*u-(H*_+$*u+d*l)),t[13]=N*(Ie*_+$*o+ve*l-(Se*l+Pe*_+V*o)),t[14]=N*(Se*u+Ne*_+d*o-(we*_+k*o+ve*u)),t[15]=N*(we*l+H*o+Pe*u-(Ie*u+Ne*l+Fe*o)),t}function Qn(e,t,n){n=n||new F(16);const r=e[0],o=e[1],c=e[2],i=e[3],a=e[4],u=e[5],s=e[6],m=e[7],f=e[8],l=e[9],E=e[10],x=e[11],y=e[12],_=e[13],T=e[14],A=e[15],h=t[0],p=t[1],S=t[2],P=t[3],I=t[4],B=t[5],L=t[6],M=t[7],O=t[8],G=t[9],z=t[10],$=t[11],V=t[12],k=t[13],d=t[14],H=t[15];return n[0]=r*h+a*p+f*S+y*P,n[1]=o*h+u*p+l*S+_*P,n[2]=c*h+s*p+E*S+T*P,n[3]=i*h+m*p+x*S+A*P,n[4]=r*I+a*B+f*L+y*M,n[5]=o*I+u*B+l*L+_*M,n[6]=c*I+s*B+E*L+T*M,n[7]=i*I+m*B+x*L+A*M,n[8]=r*O+a*G+f*z+y*$,n[9]=o*O+u*G+l*z+_*$,n[10]=c*O+s*G+E*z+T*$,n[11]=i*O+m*G+x*z+A*$,n[12]=r*V+a*k+f*d+y*H,n[13]=o*V+u*k+l*d+_*H,n[14]=c*V+s*k+E*d+T*H,n[15]=i*V+m*k+x*d+A*H,n}function er(e,t,n){return n=n||Wt(),e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function tr(e,t){return t=t||J(),t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function nr(e,t,n){n=n||J();const r=t*4;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n}function rr(e,t,n,r){r!==e&&(r=Yt(e,r));const o=n*4;return r[o+0]=t[0],r[o+1]=t[1],r[o+2]=t[2],r}function or(e,t,n,r,o){o=o||new F(16);const c=Math.tan(Math.PI*.5-.5*e),i=1/(n-r);return o[0]=c/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*i*2,o[15]=0,o}function cr(e,t,n,r,o,c,i){return i=i||new F(16),i[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(r-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-c),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(r+n)/(n-r),i[14]=(c+o)/(o-c),i[15]=1,i}function ir(e,t,n,r,o,c,i){i=i||new F(16);const a=t-e,u=r-n,s=o-c;return i[0]=2*o/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/u,i[6]=0,i[7]=0,i[8]=(e+t)/a,i[9]=(r+n)/u,i[10]=c/s,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*c/s,i[15]=0,i}let j,ne,g;function ar(e,t,n,r){return r=r||new F(16),j=j||J(),ne=ne||J(),g=g||J(),Ke(gn(e,t,g),g),Ke(Bt(n,g,j),j),Ke(Bt(g,j,ne),ne),r[0]=j[0],r[1]=j[1],r[2]=j[2],r[3]=0,r[4]=ne[0],r[5]=ne[1],r[6]=ne[2],r[7]=0,r[8]=g[0],r[9]=g[1],r[10]=g[2],r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function ur(e,t){return t=t||new F(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function sr(e,t,n){n=n||new F(16);const r=t[0],o=t[1],c=t[2],i=e[0],a=e[1],u=e[2],s=e[3],m=e[1*4+0],f=e[1*4+1],l=e[1*4+2],E=e[1*4+3],x=e[2*4+0],y=e[2*4+1],_=e[2*4+2],T=e[2*4+3],A=e[3*4+0],h=e[3*4+1],p=e[3*4+2],S=e[3*4+3];return e!==n&&(n[0]=i,n[1]=a,n[2]=u,n[3]=s,n[4]=m,n[5]=f,n[6]=l,n[7]=E,n[8]=x,n[9]=y,n[10]=_,n[11]=T),n[12]=i*r+m*o+x*c+A,n[13]=a*r+f*o+y*c+h,n[14]=u*r+l*o+_*c+p,n[15]=s*r+E*o+T*c+S,n}function fr(e,t){t=t||new F(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lr(e,t,n){n=n||new F(16);const r=e[4],o=e[5],c=e[6],i=e[7],a=e[8],u=e[9],s=e[10],m=e[11],f=Math.cos(t),l=Math.sin(t);return n[4]=f*r+l*a,n[5]=f*o+l*u,n[6]=f*c+l*s,n[7]=f*i+l*m,n[8]=f*a-l*r,n[9]=f*u-l*o,n[10]=f*s-l*c,n[11]=f*m-l*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function mr(e,t){t=t||new F(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xr(e,t,n){n=n||new F(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[2*4+0],u=e[2*4+1],s=e[2*4+2],m=e[2*4+3],f=Math.cos(t),l=Math.sin(t);return n[0]=f*r-l*a,n[1]=f*o-l*u,n[2]=f*c-l*s,n[3]=f*i-l*m,n[8]=f*a+l*r,n[9]=f*u+l*o,n[10]=f*s+l*c,n[11]=f*m+l*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function yr(e,t){t=t||new F(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Er(e,t,n){n=n||new F(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[1*4+0],u=e[1*4+1],s=e[1*4+2],m=e[1*4+3],f=Math.cos(t),l=Math.sin(t);return n[0]=f*r+l*a,n[1]=f*o+l*u,n[2]=f*c+l*s,n[3]=f*i+l*m,n[4]=f*a-l*r,n[5]=f*u-l*o,n[6]=f*s-l*c,n[7]=f*m-l*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function _r(e,t,n){n=n||new F(16);let r=e[0],o=e[1],c=e[2];const i=Math.sqrt(r*r+o*o+c*c);r/=i,o/=i,c/=i;const a=r*r,u=o*o,s=c*c,m=Math.cos(t),f=Math.sin(t),l=1-m;return n[0]=a+(1-a)*m,n[1]=r*o*l+c*f,n[2]=r*c*l-o*f,n[3]=0,n[4]=r*o*l-c*f,n[5]=u+(1-u)*m,n[6]=o*c*l+r*f,n[7]=0,n[8]=r*c*l+o*f,n[9]=o*c*l-r*f,n[10]=s+(1-s)*m,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Tr(e,t,n,r){r=r||new F(16);let o=t[0],c=t[1],i=t[2];const a=Math.sqrt(o*o+c*c+i*i);o/=a,c/=a,i/=a;const u=o*o,s=c*c,m=i*i,f=Math.cos(n),l=Math.sin(n),E=1-f,x=u+(1-u)*f,y=o*c*E+i*l,_=o*i*E-c*l,T=o*c*E-i*l,A=s+(1-s)*f,h=c*i*E+o*l,p=o*i*E+c*l,S=c*i*E-o*l,P=m+(1-m)*f,I=e[0],B=e[1],L=e[2],M=e[3],O=e[4],G=e[5],z=e[6],$=e[7],V=e[8],k=e[9],d=e[10],H=e[11];return r[0]=x*I+y*O+_*V,r[1]=x*B+y*G+_*k,r[2]=x*L+y*z+_*d,r[3]=x*M+y*$+_*H,r[4]=T*I+A*O+h*V,r[5]=T*B+A*G+h*k,r[6]=T*L+A*z+h*d,r[7]=T*M+A*$+h*H,r[8]=p*I+S*O+P*V,r[9]=p*B+S*G+P*k,r[10]=p*L+S*z+P*d,r[11]=p*M+S*$+P*H,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function Ar(e,t){return t=t||new F(16),t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function br(e,t,n){n=n||new F(16);const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0],n[1]=r*e[0*4+1],n[2]=r*e[0*4+2],n[3]=r*e[0*4+3],n[4]=o*e[1*4+0],n[5]=o*e[1*4+1],n[6]=o*e[1*4+2],n[7]=o*e[1*4+3],n[8]=c*e[2*4+0],n[9]=c*e[2*4+1],n[10]=c*e[2*4+2],n[11]=c*e[2*4+3],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function hr(e,t,n){n=n||J();const r=t[0],o=t[1],c=t[2],i=r*e[0*4+3]+o*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function pr(e,t,n){n=n||J();const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0],n[1]=r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1],n[2]=r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2],n}function Rr(e,t,n){n=n||J();const r=Kt(e),o=t[0],c=t[1],i=t[2];return n[0]=o*r[0*4+0]+c*r[0*4+1]+i*r[0*4+2],n[1]=o*r[1*4+0]+c*r[1*4+1]+i*r[1*4+2],n[2]=o*r[2*4+0]+c*r[2*4+1]+i*r[2*4+2],n}var Fr=Object.freeze({__proto__:null,axisRotate:Tr,axisRotation:_r,copy:Yt,create:Zn,frustum:ir,getAxis:nr,getTranslation:tr,identity:Wt,inverse:Kt,lookAt:ar,multiply:Qn,negate:qn,ortho:cr,perspective:or,rotateX:lr,rotateY:xr,rotateZ:Er,rotationX:fr,rotationY:mr,rotationZ:yr,scale:br,scaling:Ar,setAxis:rr,setDefaultType:jn,setTranslation:er,transformDirection:pr,transformNormal:Rr,transformPoint:hr,translate:sr,translation:ur,transpose:Jn});const it=5120,Te=5121,at=5122,ut=5123,st=5124,ft=5125,lt=5126,Sr=32819,vr=32820,Ir=33635,Pr=5131,wr=33640,Nr=35899,Ur=35902,Cr=36269,Dr=34042,gt={};{const e=gt;e[it]=Int8Array,e[Te]=Uint8Array,e[at]=Int16Array,e[ut]=Uint16Array,e[st]=Int32Array,e[ft]=Uint32Array,e[lt]=Float32Array,e[Sr]=Uint16Array,e[vr]=Uint16Array,e[Ir]=Uint16Array,e[Pr]=Uint16Array,e[wr]=Uint32Array,e[Nr]=Uint32Array,e[Ur]=Uint32Array,e[Cr]=Uint32Array,e[Dr]=Uint32Array}function mt(e){if(e instanceof Int8Array)return it;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Te;if(e instanceof Int16Array)return at;if(e instanceof Uint16Array)return ut;if(e instanceof Int32Array)return st;if(e instanceof Uint32Array)return ft;if(e instanceof Float32Array)return lt;throw new Error("unsupported typed array type")}function jt(e){if(e===Int8Array)return it;if(e===Uint8Array||e===Uint8ClampedArray)return Te;if(e===Int16Array)return at;if(e===Uint16Array)return ut;if(e===Int32Array)return st;if(e===Uint32Array)return ft;if(e===Float32Array)return lt;throw new Error("unsupported typed array type")}function qt(e){const t=gt[e];if(!t)throw new Error("unknown gl type");return t}const Be=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function xt(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])})}function Zt(...e){console.error(...e)}const Lt=new Map;function yt(e,t){if(!e||typeof e!="object")return!1;let n=Lt.get(t);n||(n=new WeakMap,Lt.set(t,n));let r=n.get(e);if(r===void 0){const o=Object.prototype.toString.call(e);r=o.substring(8,o.length-1)===t,n.set(e,r)}return r}function Br(e,t){return typeof WebGLBuffer<"u"&&yt(t,"WebGLBuffer")}function Jt(e,t){return typeof WebGLTexture<"u"&&yt(t,"WebGLTexture")}function Lr(e,t){return typeof WebGLSampler<"u"&&yt(t,"WebGLSampler")}const Qt=35044,ae=34962,Mr=34963,Or=34660,Gr=5120,zr=5121,$r=5122,Vr=5123,kr=5124,dr=5125,en=5126,Et={attribPrefix:""};function Hr(e){xt(e,Et)}function Xr(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||Qt)}function tn(e,t,n,r){if(Br(e,t))return t;n=n||ae;const o=e.createBuffer();return Xr(e,n,o,t,r),o}function nn(e){return e==="indices"}function Yr(e){return e===Int8Array||e===Uint8Array}function Wr(e){return e.length?e:e.data}const Kr=/coord|texture/i,gr=/color|colour/i;function jr(e,t){let n;if(Kr.test(e)?n=2:gr.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function qr(e,t,n){return e.numComponents||e.size||jr(t,n||Wr(e).length)}function rn(e,t){if(Be(e))return e;if(Be(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?_t(e.type):void 0;return n||(nn(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Zr(e){return typeof e=="number"?e:e?jt(e):en}function _t(e){return typeof e=="number"?qt(e):e||Float32Array}function Jr(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Zr(t.type),arrayType:_t(t.type)}}function Qr(e,t){const n=t.data||t,r=_t(t.type),o=n*r.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(ae,c),e.bufferData(ae,o,t.drawType||Qt),{buffer:c,numValues:n,type:jt(r),arrayType:r}}function eo(e,t,n){const r=rn(t,n);return{arrayType:r.constructor,buffer:tn(e,r,void 0,t.drawType),type:mt(r),numValues:0}}function to(e,t){const n={};return Object.keys(t).forEach(function(r){if(!nn(r)){const o=t[r],c=o.attrib||o.name||o.attribName||Et.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!Be(o.value))throw new Error("array.value is not array or typedarray");n[c]={value:o.value}}else{let i;o.buffer&&o.buffer instanceof WebGLBuffer?i=Jr:typeof o=="number"||typeof o.data=="number"?i=Qr:i=eo;const{buffer:a,type:u,numValues:s,arrayType:m}=i(e,o,r),f=o.normalize!==void 0?o.normalize:Yr(m),l=qr(o,r,s);n[c]={buffer:a,numComponents:l,type:u,normalize:f,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(ae,null),n}function no(e,t){return t===Gr||t===zr?1:t===$r||t===Vr?2:t===kr||t===dr||t===en?4:0}const ge=["position","positions","a_position"];function ro(e,t){let n,r;for(r=0;r<ge.length&&(n=ge[r],!(n in t||(n=Et.attribPrefix+n,n in t)));++r);r===ge.length&&(n=Object.keys(t)[0]);const o=t[n];if(!o.buffer)return 1;e.bindBuffer(ae,o.buffer);const c=e.getBufferParameter(ae,Or);e.bindBuffer(ae,null);const i=no(e,o.type),a=c/i,u=o.numComponents||o.size,s=a/u;if(s%1!==0)throw new Error(`numComponents ${u} not correct for length ${length}`);return s}function on(e,t,n){const r=to(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const c=t.indices;if(c){const i=rn(c,"indices");o.indices=tn(e,i,Mr),o.numElements=i.length,o.elementType=mt(i)}else o.numElements||(o.numElements=ro(e,o.attribs));return o}function he(e){return!!e.texStorage2D}const cn=function(){const e={},t={};function n(r){const o=r.constructor.name;if(!e[o]){for(const c in r)if(typeof r[c]=="number"){const i=t[r[c]];t[r[c]]=i?`${i} | ${c}`:c}e[o]=!0}}return function(o,c){return n(o),t[c]||(typeof c=="number"?`0x${c.toString(16)}`:c)}}(),K={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ae=Be,an=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Ze=6406,Y=6407,R=6408,Je=6409,Qe=6410,le=6402,et=34041,Le=33071,oo=9728,co=9729,ee=3553,Q=34067,ue=32879,se=35866,Tt=34069,io=34070,ao=34071,uo=34072,so=34073,fo=34074,tt=10241,nt=10240,Me=10242,Oe=10243,Mt=32882,lo=33082,mo=33083,xo=33084,yo=33085,Eo=34892,_o=34893,At=3317,un=3314,sn=32878,fn=3316,ln=3315,mn=32877,To=37443,Ao=37441,bo=37440,ho=33321,po=36756,Ro=33325,Fo=33326,So=33330,vo=33329,Io=33338,Po=33337,wo=33340,No=33339,Uo=33323,Co=36757,Do=33327,Bo=33328,Lo=33336,Mo=33335,Oo=33332,Go=33331,zo=33334,$o=33333,Vo=32849,ko=35905,Ho=36194,Xo=36758,Yo=35898,Wo=35901,Ko=34843,go=34837,jo=36221,qo=36239,Zo=36215,Jo=36233,Qo=36209,ec=36227,tc=32856,nc=35907,rc=36759,oc=32855,cc=32854,ic=32857,ac=34842,uc=34836,sc=36220,fc=36238,lc=36975,mc=36214,xc=36232,yc=36226,Ec=36208,_c=33189,Tc=33190,Ac=36012,bc=36013,hc=35056,q=5120,v=5121,Ue=5122,fe=5123,Ce=5124,re=5125,U=5126,Ot=32819,Gt=32820,zt=33635,W=5131,xe=36193,je=33640,pc=35899,Rc=35902,Fc=36269,Sc=34042,ye=33319,oe=33320,Ee=6403,ce=36244,ie=36248,Z=36249,vc={};{const e=vc;e[Ze]={numColorComponents:1},e[Je]={numColorComponents:1},e[Qe]={numColorComponents:2},e[Y]={numColorComponents:3},e[R]={numColorComponents:4},e[Ee]={numColorComponents:1},e[ce]={numColorComponents:1},e[ye]={numColorComponents:2},e[oe]={numColorComponents:2},e[Y]={numColorComponents:3},e[ie]={numColorComponents:3},e[R]={numColorComponents:4},e[Z]={numColorComponents:4},e[le]={numColorComponents:1},e[et]={numColorComponents:2}}let qe;function $e(e){if(!qe){const t={};t[Ze]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[v,W,xe,U]},t[Je]={textureFormat:Je,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[v,W,xe,U]},t[Qe]={textureFormat:Qe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[v,W,xe,U]},t[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[v,W,xe,U,zt]},t[R]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[v,W,xe,U,Ot,Gt]},t[le]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[re,fe]},t[ho]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[v]},t[po]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[q]},t[Ro]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[U,W]},t[Fo]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[So]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[v]},t[vo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[q]},t[Oo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[fe]},t[Go]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ue]},t[zo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},t[$o]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ce]},t[Uo]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[v]},t[Co]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[q]},t[Do]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[U,W]},t[Bo]={textureFormat:ye,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[U]},t[Lo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[v]},t[Mo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[q]},t[Io]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fe]},t[Po]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ue]},t[wo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[re]},t[No]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ce]},t[Vo]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[v]},t[ko]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[v]},t[Ho]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[v,zt]},t[Xo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[q]},t[Yo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[U,W,pc]},t[Wo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[U,W,Rc]},t[Ko]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[U,W]},t[go]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[U]},t[jo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[v]},t[qo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[q]},t[Zo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[fe]},t[Jo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ue]},t[Qo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[re]},t[ec]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ce]},t[tc]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[v]},t[nc]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[v]},t[rc]={textureFormat:R,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[q]},t[oc]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[v,Gt,je]},t[cc]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[v,Ot]},t[ic]={textureFormat:R,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[je]},t[ac]={textureFormat:R,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[U,W]},t[uc]={textureFormat:R,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[U]},t[sc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[v]},t[fc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[q]},t[lc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[je]},t[mc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[fe]},t[xc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ue]},t[yc]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ce]},t[Ec]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[re]},t[_c]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[fe,re]},t[Tc]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},t[Ac]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[hc]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Sc]},t[bc]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fc]},Object.keys(t).forEach(function(n){const r=t[n];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(o,c){const i=r.type[c];r.bytesPerElementMap[i]=o})}),qe=t}return qe[e]}function Ic(e,t){const n=$e(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function pe(e){const t=$e(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function $t(e){return(e&e-1)===0}function Pc(e,t,n,r){if(!he(e))return $t(t)&&$t(n);const o=$e(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function wc(e){const t=$e(e);if(!t)throw"unknown internal format";return t.textureFilterable}function Nc(e,t,n){return Ae(t)?mt(t):n||v}function De(e,t,n,r,o){if(o%1!==0)throw"can't guess dimensions";if(!n&&!r){const c=Math.sqrt(o/(t===Q?6:1));c%1===0?(n=c,r=c):(n=o,r=1)}else if(r){if(!n&&(n=o/r,n%1))throw"can't guess dimensions"}else if(r=o/n,r%1)throw"can't guess dimensions";return{width:n,height:r}}function Uc(e){K.textureColor=new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Cc(e){xt(e,K),e.textureColor&&Uc(e.textureColor)}function me(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(To,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(Ao,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(bo,t.flipY)}function xn(e){e.pixelStorei(At,4),he(e)&&(e.pixelStorei(un,0),e.pixelStorei(sn,0),e.pixelStorei(fn,0),e.pixelStorei(ln,0),e.pixelStorei(mn,0))}function Dc(e,t,n,r){r.minMag&&(n.call(e,t,tt,r.minMag),n.call(e,t,nt,r.minMag)),r.min&&n.call(e,t,tt,r.min),r.mag&&n.call(e,t,nt,r.mag),r.wrap&&(n.call(e,t,Me,r.wrap),n.call(e,t,Oe,r.wrap),(t===ue||Lr(e,t))&&n.call(e,t,Mt,r.wrap)),r.wrapR&&n.call(e,t,Mt,r.wrapR),r.wrapS&&n.call(e,t,Me,r.wrapS),r.wrapT&&n.call(e,t,Oe,r.wrapT),r.minLod!==void 0&&n.call(e,t,lo,r.minLod),r.maxLod!==void 0&&n.call(e,t,mo,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,xo,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,yo,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,_o,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,Eo,r.compareMode)}function yn(e,t,n){const r=n.target||ee;e.bindTexture(r,t),Dc(e,r,e.texParameteri,n)}function Bc(e){return e=e||K.textureColor,Ae(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function rt(e,t,n,r,o,c){n=n||K.textureOptions,c=c||R;const i=n.target||ee;if(r=r||n.width,o=o||n.height,e.bindTexture(i,t),Pc(e,r,o,c))e.generateMipmap(i);else{const a=wc(c)?co:oo;e.texParameteri(i,tt,a),e.texParameteri(i,nt,a),e.texParameteri(i,Me,Le),e.texParameteri(i,Oe,Le)}}function be(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function ot(e,t){return t=t||{},t.cubeFaceOrder||[Tt,io,ao,uo,so,fo]}function ct(e,t){const r=ot(e,t).map(function(o,c){return{face:o,ndx:c}});return r.sort(function(o,c){return o.face-c.face}),r}function En(e,t,n,r){r=r||K.textureOptions;const o=r.target||ee,c=r.level||0;let i=n.width,a=n.height;const u=r.internalFormat||r.format||R,s=pe(u),m=r.format||s.format,f=r.type||s.type;if(me(e,r),e.bindTexture(o,t),o===Q){const l=n.width,E=n.height;let x,y;if(l/6===E)x=E,y=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===l)x=l,y=[0,0,0,1,0,2,0,3,0,4,0,5];else if(l/3===E/2)x=l/3,y=[0,0,1,0,2,0,0,1,1,1,2,1];else if(l/2===E/3)x=l/2,y=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const _=an();_?(_.canvas.width=x,_.canvas.height=x,i=x,a=x,ct(e,r).forEach(function(T){const A=y[T.ndx*2+0]*x,h=y[T.ndx*2+1]*x;_.drawImage(n,A,h,x,x,0,0,x,x),e.texImage2D(T.face,c,u,m,f,_.canvas)}),_.canvas.width=1,_.canvas.height=1):typeof createImageBitmap<"u"&&(i=x,a=x,ct(e,r).forEach(function(T){const A=y[T.ndx*2+0]*x,h=y[T.ndx*2+1]*x;e.texImage2D(T.face,c,u,x,x,0,m,f,null),createImageBitmap(n,A,h,x,x,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(p){me(e,r),e.bindTexture(o,t),e.texImage2D(T.face,c,u,m,f,p),be(r)&&rt(e,t,r,i,a,u)})}))}else if(o===ue||o===se){const l=Math.min(n.width,n.height),E=Math.max(n.width,n.height),x=E/l;if(x%1!==0)throw"can not compute 3D dimensions of element";const y=n.width===E?1:0,_=n.height===E?1:0;e.pixelStorei(At,1),e.pixelStorei(un,n.width),e.pixelStorei(sn,0),e.pixelStorei(mn,0),e.texImage3D(o,c,u,l,l,l,0,m,f,null);for(let T=0;T<x;++T){const A=T*l*y,h=T*l*_;e.pixelStorei(fn,A),e.pixelStorei(ln,h),e.texSubImage3D(o,c,0,0,T,l,l,1,m,f,n)}xn(e)}else e.texImage2D(o,c,u,m,f,n);be(r)&&rt(e,t,r,i,a,u),yn(e,t,r)}function Re(){}function Lc(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function Mc(e,t){return t===void 0&&!Lc(e)?"anonymous":t}function Oc(e,t,n){n=n||Re;let r;if(t=t!==void 0?t:K.crossOrigin,t=Mc(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",c),r.removeEventListener("load",i),r=null},c=function(){const u="couldn't load image: "+e;Zt(u),n(u,r),o()},i=function(){n(null,r),o()};return r.addEventListener("error",c),r.addEventListener("load",i),r.src=e,r}else if(typeof ImageBitmap<"u"){let o,c;const i=function(){n(o,c)},a={};t&&(a.mode="cors"),fetch(e,a).then(function(u){if(!u.ok)throw u;return u.blob()}).then(function(u){return createImageBitmap(u,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(u){c=u,setTimeout(i)}).catch(function(u){o=u,setTimeout(i)}),r=null}return r}function _n(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function bt(e,t,n){return _n(e)?(setTimeout(function(){n(null,e)}),e):Oc(e,t,n)}function ht(e,t,n){n=n||K.textureOptions;const r=n.target||ee;if(e.bindTexture(r,t),n.color===!1)return;const o=Bc(n.color);if(r===Q)for(let c=0;c<6;++c)e.texImage2D(Tt+c,0,R,1,1,0,R,v,o);else r===ue||r===se?e.texImage3D(r,0,R,1,1,1,0,R,v,o):e.texImage2D(r,0,R,1,1,0,R,v,o)}function Gc(e,t,n,r){return r=r||Re,n=n||K.textureOptions,ht(e,t,n),n=Object.assign({},n),bt(n.src,n.crossOrigin,function(c,i){c?r(c,t,i):(En(e,t,i,n),r(null,t,i))})}function zc(e,t,n,r){r=r||Re;const o=n.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const c=n.level||0,i=n.internalFormat||n.format||R,a=pe(i),u=n.format||a.format,s=n.type||v,m=n.target||ee;if(m!==Q)throw"target must be TEXTURE_CUBE_MAP";ht(e,t,n),n=Object.assign({},n);let f=6;const l=[],E=ot(e,n);let x;function y(_){return function(T,A){--f,T?l.push(T):A.width!==A.height?l.push("cubemap face img is not a square: "+A.src):(me(e,n),e.bindTexture(m,t),f===5?ot().forEach(function(h){e.texImage2D(h,c,i,u,s,A)}):e.texImage2D(_,c,i,u,s,A),be(n)&&e.generateMipmap(m)),f===0&&r(l.length?l:void 0,t,x)}}x=o.map(function(_,T){return bt(_,n.crossOrigin,y(E[T]))})}function $c(e,t,n,r){r=r||Re;const o=n.src,c=n.internalFormat||n.format||R,i=pe(c),a=n.format||i.format,u=n.type||v,s=n.target||se;if(s!==ue&&s!==se)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ht(e,t,n),n=Object.assign({},n);let m=o.length;const f=[];let l;const E=n.level||0;let x=n.width,y=n.height;const _=o.length;let T=!0;function A(h){return function(p,S){if(--m,p)f.push(p);else{if(me(e,n),e.bindTexture(s,t),T){T=!1,x=n.width||S.width,y=n.height||S.height,e.texImage3D(s,E,c,x,y,_,0,a,u,null);for(let P=0;P<_;++P)e.texSubImage3D(s,E,0,0,P,x,y,1,a,u,S)}else{let P=S,I;(S.width!==x||S.height!==y)&&(I=an(),P=I.canvas,I.canvas.width=x,I.canvas.height=y,I.drawImage(S,0,0,x,y)),e.texSubImage3D(s,E,0,0,h,x,y,1,a,u,P),I&&P===I.canvas&&(I.canvas.width=0,I.canvas.height=0)}be(n)&&e.generateMipmap(s)}m===0&&r(f.length?f:void 0,t,l)}}l=o.map(function(h,p){return bt(h,n.crossOrigin,A(p))})}function Vc(e,t,n,r){r=r||K.textureOptions;const o=r.target||ee;e.bindTexture(o,t);let c=r.width,i=r.height,a=r.depth;const u=r.level||0,s=r.internalFormat||r.format||R,m=pe(s),f=r.format||m.format,l=r.type||Nc(e,n,m.type);if(Ae(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const _=qt(l);n=new _(n)}const E=Ic(s,l),x=n.byteLength/E;if(x%1)throw"length wrong size for format: "+cn(e,f);let y;if(o===ue||o===se)if(!c&&!i&&!a){const _=Math.cbrt(x);if(_%1!==0)throw"can't guess cube size of array of numElements: "+x;c=_,i=_,a=_}else c&&(!i||!a)?(y=De(e,o,i,a,x/c),i=y.width,a=y.height):i&&(!c||!a)?(y=De(e,o,c,a,x/i),c=y.width,a=y.height):(y=De(e,o,c,i,x/a),c=y.width,i=y.height);else y=De(e,o,c,i,x),c=y.width,i=y.height;if(xn(e),e.pixelStorei(At,r.unpackAlignment||1),me(e,r),o===Q){const _=E/n.BYTES_PER_ELEMENT,T=x/6*_;ct(e,r).forEach(A=>{const h=T*A.ndx,p=n.subarray(h,h+T);e.texImage2D(A.face,u,s,c,i,0,f,l,p)})}else o===ue||o===se?e.texImage3D(o,u,s,c,i,a,0,f,l,n):e.texImage2D(o,u,s,c,i,0,f,l,n);return{width:c,height:i,depth:a,type:l}}function kc(e,t,n){const r=n.target||ee;e.bindTexture(r,t);const o=n.level||0,c=n.internalFormat||n.format||R,i=pe(c),a=n.format||i.format,u=n.type||i.type;if(me(e,n),r===Q)for(let s=0;s<6;++s)e.texImage2D(Tt+s,o,c,n.width,n.height,0,a,u,null);else r===ue||r===se?e.texImage3D(r,o,c,n.width,n.height,n.depth,0,a,u,null):e.texImage2D(r,o,c,n.width,n.height,0,a,u,null)}function dc(e,t,n){n=n||Re,t=t||K.textureOptions;const r=e.createTexture(),o=t.target||ee;let c=t.width||1,i=t.height||1;const a=t.internalFormat||R;e.bindTexture(o,r),o===Q&&(e.texParameteri(o,Me,Le),e.texParameteri(o,Oe,Le));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")Gc(e,r,t,n);else if(Ae(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||Ae(u[0]))){const s=Vc(e,r,u,t);c=s.width,i=s.height}else Array.isArray(u)&&(typeof u[0]=="string"||_n(u[0]))?o===Q?zc(e,r,t,n):$c(e,r,t,n):(En(e,r,u,t),c=u.width,i=u.height);else kc(e,r,t);return be(t)&&rt(e,r,t,c,i,a),yn(e,r,t),r}const pt=Zt;function Tn(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const Ge=33984,Ve=34962,Hc=34963,Xc=35713,Yc=35714,Wc=35632,Kc=35633,gc=35981,An=35718,jc=35721,qc=35971,Zc=35382,Jc=35396,Qc=35398,ei=35392,ti=35395,ke=5126,bn=35664,hn=35665,pn=35666,Rt=5124,Rn=35667,Fn=35668,Sn=35669,vn=35670,In=35671,Pn=35672,wn=35673,Nn=35674,Un=35675,Cn=35676,ni=35678,ri=35680,oi=35679,ci=35682,ii=35685,ai=35686,ui=35687,si=35688,fi=35689,li=35690,mi=36289,xi=36292,yi=36293,Ft=5125,Dn=36294,Bn=36295,Ln=36296,Ei=36298,_i=36299,Ti=36300,Ai=36303,bi=36306,hi=36307,pi=36308,Ri=36311,de=3553,He=34067,St=32879,Xe=35866,b={};function Mn(e,t){return b[t].bindPoint}function Fi(e,t){return function(n){e.uniform1f(t,n)}}function Si(e,t){return function(n){e.uniform1fv(t,n)}}function vi(e,t){return function(n){e.uniform2fv(t,n)}}function Ii(e,t){return function(n){e.uniform3fv(t,n)}}function Pi(e,t){return function(n){e.uniform4fv(t,n)}}function On(e,t){return function(n){e.uniform1i(t,n)}}function Gn(e,t){return function(n){e.uniform1iv(t,n)}}function zn(e,t){return function(n){e.uniform2iv(t,n)}}function $n(e,t){return function(n){e.uniform3iv(t,n)}}function Vn(e,t){return function(n){e.uniform4iv(t,n)}}function wi(e,t){return function(n){e.uniform1ui(t,n)}}function Ni(e,t){return function(n){e.uniform1uiv(t,n)}}function Ui(e,t){return function(n){e.uniform2uiv(t,n)}}function Ci(e,t){return function(n){e.uniform3uiv(t,n)}}function Di(e,t){return function(n){e.uniform4uiv(t,n)}}function Bi(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Li(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Mi(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Oi(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Gi(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function zi(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function $i(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Vi(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function ki(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function C(e,t,n,r){const o=Mn(e,t);return he(e)?function(c){let i,a;!c||Jt(e,c)?(i=c,a=null):(i=c.texture,a=c.sampler),e.uniform1i(r,n),e.activeTexture(Ge+n),e.bindTexture(o,i),e.bindSampler(n,a)}:function(c){e.uniform1i(r,n),e.activeTexture(Ge+n),e.bindTexture(o,c)}}function D(e,t,n,r,o){const c=Mn(e,t),i=new Int32Array(o);for(let a=0;a<o;++a)i[a]=n+a;return he(e)?function(a){e.uniform1iv(r,i),a.forEach(function(u,s){e.activeTexture(Ge+i[s]);let m,f;!u||Jt(e,u)?(m=u,f=null):(m=u.texture,f=u.sampler),e.bindSampler(n,f),e.bindTexture(c,m)})}:function(a){e.uniform1iv(r,i),a.forEach(function(u,s){e.activeTexture(Ge+i[s]),e.bindTexture(c,u)})}}b[ke]={Type:Float32Array,size:4,setter:Fi,arraySetter:Si};b[bn]={Type:Float32Array,size:8,setter:vi,cols:2};b[hn]={Type:Float32Array,size:12,setter:Ii,cols:3};b[pn]={Type:Float32Array,size:16,setter:Pi,cols:4};b[Rt]={Type:Int32Array,size:4,setter:On,arraySetter:Gn};b[Rn]={Type:Int32Array,size:8,setter:zn,cols:2};b[Fn]={Type:Int32Array,size:12,setter:$n,cols:3};b[Sn]={Type:Int32Array,size:16,setter:Vn,cols:4};b[Ft]={Type:Uint32Array,size:4,setter:wi,arraySetter:Ni};b[Dn]={Type:Uint32Array,size:8,setter:Ui,cols:2};b[Bn]={Type:Uint32Array,size:12,setter:Ci,cols:3};b[Ln]={Type:Uint32Array,size:16,setter:Di,cols:4};b[vn]={Type:Uint32Array,size:4,setter:On,arraySetter:Gn};b[In]={Type:Uint32Array,size:8,setter:zn,cols:2};b[Pn]={Type:Uint32Array,size:12,setter:$n,cols:3};b[wn]={Type:Uint32Array,size:16,setter:Vn,cols:4};b[Nn]={Type:Float32Array,size:32,setter:Bi,rows:2,cols:2};b[Un]={Type:Float32Array,size:48,setter:Li,rows:3,cols:3};b[Cn]={Type:Float32Array,size:64,setter:Mi,rows:4,cols:4};b[ii]={Type:Float32Array,size:32,setter:Oi,rows:2,cols:3};b[ai]={Type:Float32Array,size:32,setter:zi,rows:2,cols:4};b[ui]={Type:Float32Array,size:48,setter:Gi,rows:3,cols:2};b[si]={Type:Float32Array,size:48,setter:Vi,rows:3,cols:4};b[fi]={Type:Float32Array,size:64,setter:$i,rows:4,cols:2};b[li]={Type:Float32Array,size:64,setter:ki,rows:4,cols:3};b[ni]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[ri]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[oi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:St};b[ci]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[mi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[xi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[yi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[Ei]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[_i]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:St};b[Ti]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[Ai]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[bi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[hi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:St};b[pi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[Ri]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};function Ye(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Ve,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||ke,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function te(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Ve,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Rt,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function We(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Ve,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Ft,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function vt(e,t,n){const r=n.size,o=n.count;return function(c){e.bindBuffer(Ve,c.buffer);const i=c.size||c.numComponents||r,a=i/o,u=c.type||ke,m=b[u].size*i,f=c.normalize||!1,l=c.offset||0,E=m/o;for(let x=0;x<o;++x)e.enableVertexAttribArray(t+x),e.vertexAttribPointer(t+x,a,u,f,m,l+E*x),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+x,c.divisor||0)}}const w={};w[ke]={size:4,setter:Ye};w[bn]={size:8,setter:Ye};w[hn]={size:12,setter:Ye};w[pn]={size:16,setter:Ye};w[Rt]={size:4,setter:te};w[Rn]={size:8,setter:te};w[Fn]={size:12,setter:te};w[Sn]={size:16,setter:te};w[Ft]={size:4,setter:We};w[Dn]={size:8,setter:We};w[Bn]={size:12,setter:We};w[Ln]={size:16,setter:We};w[vn]={size:4,setter:te};w[In]={size:8,setter:te};w[Pn]={size:12,setter:te};w[wn]={size:16,setter:te};w[Nn]={size:4,setter:vt,count:2};w[Un]={size:9,setter:vt,count:3};w[Cn]={size:16,setter:vt,count:4};const di=/ERROR:\s*\d+:(\d+)/gi;function Hi(e,t="",n=0){const r=[...t.matchAll(di)],o=new Map(r.map((c,i)=>{const a=parseInt(c[1]),u=r[i+1],s=u?u.index:t.length,m=t.substring(c.index,s);return[a-1,m]}));return e.split(`
`).map((c,i)=>{const a=o.get(i);return`${i+1+n}: ${c}${a?`

^^^ ${a}`:""}`}).join(`
`)}const Vt=/^[ \t]*\n/;function kn(e){let t=0;return Vt.test(e)&&(t=1,e=e.replace(Vt,"")),{lineOffset:t,shaderSource:e}}function Xi(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function Yi(e,t,n,r){if(r=r||pt,!e.getShaderParameter(n,Xc)){const c=e.getShaderInfoLog(n),{lineOffset:i,shaderSource:a}=kn(e.getShaderSource(n)),u=`${Hi(a,c,i)}
Error compiling ${cn(e,t)}: ${c}`;return r(u),u}return""}function It(e,t,n){let r,o,c;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const s=e;n=s.errorCallback,e=s.attribLocations,r=s.transformFeedbackVaryings,o=s.transformFeedbackMode,c=s.callback}const i=n||pt,a=[],u={errorCallback(s,...m){a.push(s),i(s,...m)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:c,errors:a};{let s={};Array.isArray(e)?e.forEach(function(m,f){s[m]=t?t[f]:f}):s=e||{},u.attribLocations=s}return u}const Wi=["VERTEX_SHADER","FRAGMENT_SHADER"];function Ki(e,t){if(t.indexOf("frag")>=0)return Wc;if(t.indexOf("vert")>=0)return Kc}function gi(e,t,n){const r=e.getAttachedShaders(t);for(const o of r)n.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const ji=(e=0)=>new Promise(t=>setTimeout(t,e));function qi(e,t,n){const r=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:c,transformFeedbackMode:i}=It(n);for(let a=0;a<t.length;++a){let u=t[a];if(typeof u=="string"){const s=Tn(u),m=s?s.text:u;let f=e[Wi[a]];s&&s.type&&(f=Ki(e,s.type)||f),u=e.createShader(f),e.shaderSource(u,kn(m).shaderSource),e.compileShader(u),e.attachShader(r,u)}}Object.entries(o).forEach(([a,u])=>e.bindAttribLocation(r,u,a));{let a=c;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(r,a,i||gc))}return e.linkProgram(r),r}function Zi(e,t,n,r,o){const c=It(n,r,o),i=new Set(t),a=qi(e,t,c);function u(s,m){const f=Qi(s,m,c.errorCallback);return f&&gi(s,m,i),f}if(c.callback){Ji(e,a).then(()=>{const s=u(e,a);c.callback(s,s?void 0:a)});return}return u(e,a)?void 0:a}async function Ji(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(c,i)=>c.getProgramParameter(i,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await ji(o),o=1e3/60;while(!r(e,t))}function Qi(e,t,n){if(n=n||pt,!e.getProgramParameter(t,Yc)){const o=e.getProgramInfoLog(t);n(`Error in program linking: ${o}`);const i=e.getAttachedShaders(t).map(a=>Yi(e,e.getShaderParameter(a,e.SHADER_TYPE),a,n));return`${o}
${i.filter(a=>a).join(`
`)}`}}function ea(e,t,n,r,o){return Zi(e,t,n,r,o)}function dn(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const ta=/(\.|\[|]|\w+)/g,na=e=>e>="0"&&e<="9";function ra(e,t,n,r){const o=e.split(ta).filter(a=>a!=="");let c=0,i="";for(;;){const a=o[c++];i+=a;const u=na(a[0]),s=u?parseInt(a):a;if(u&&(i+=o[c++]),c===o.length){n[s]=t;break}else{const f=o[c++],l=f==="[",E=n[s]||(l?[]:{});n[s]=E,n=E,r[i]=r[i]||function(x){return function(y){Hn(x,y)}}(E),i+=f}}}function oa(e,t){let n=0;function r(a,u,s){const m=u.name.endsWith("[0]"),f=u.type,l=b[f];if(!l)throw new Error(`unknown type: 0x${f.toString(16)}`);let E;if(l.bindPoint){const x=n;n+=u.size,m?E=l.arraySetter(e,f,x,s,u.size):E=l.setter(e,f,x,s,u.size)}else l.arraySetter&&m?E=l.arraySetter(e,s):E=l.setter(e,s);return E.location=s,E}const o={},c={},i=e.getProgramParameter(t,An);for(let a=0;a<i;++a){const u=e.getActiveUniform(t,a);if(dn(u))continue;let s=u.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const m=e.getUniformLocation(t,u.name);if(m){const f=r(t,u,m);o[s]=f,ra(s,f,c,o)}}return o}function ca(e,t){const n={},r=e.getProgramParameter(t,qc);for(let o=0;o<r;++o){const c=e.getTransformFeedbackVarying(t,o);n[c.name]={index:o,type:c.type,size:c.size}}return n}function ia(e,t){const n=e.getProgramParameter(t,An),r=[],o=[];for(let a=0;a<n;++a){o.push(a),r.push({});const u=e.getActiveUniform(t,a);r[a].name=u.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const u=a[0],s=a[1];e.getActiveUniforms(t,o,e[u]).forEach(function(m,f){r[f][s]=m})});const c={},i=e.getProgramParameter(t,Zc);for(let a=0;a<i;++a){const u=e.getActiveUniformBlockName(t,a),s={index:e.getUniformBlockIndex(t,u),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,Jc),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,Qc),size:e.getActiveUniformBlockParameter(t,a,ei),uniformIndices:e.getActiveUniformBlockParameter(t,a,ti)};s.used=s.usedByVertexShader||s.usedByFragmentShader,c[u]=s}return{blockSpecs:c,uniformData:r}}function Hn(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):Hn(e[n],t[n])}}function Xn(e,...t){const n=e.uniformSetters||e,r=t.length;for(let o=0;o<r;++o){const c=t[o];if(Array.isArray(c)){const i=c.length;for(let a=0;a<i;++a)Xn(n,c[a])}else for(const i in c){const a=n[i];a&&a(c[i])}}}function aa(e,t){const n={},r=e.getProgramParameter(t,jc);for(let o=0;o<r;++o){const c=e.getActiveAttrib(t,o);if(dn(c))continue;const i=e.getAttribLocation(t,c.name),a=w[c.type],u=a.setter(e,i,a);u.location=i,n[c.name]=u}return n}function ua(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function Pt(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(ua(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Hc,n.indices))}function kt(e,t){const n=oa(e,t),r=aa(e,t),o={program:t,uniformSetters:n,attribSetters:r};return he(e)&&(o.uniformBlockSpec=ia(e,t),o.transformFeedbackInfo=ca(e,t)),o}const sa=/\s|{|}|;/;function Yn(e,t,n,r,o){const c=It(n,r,o),i=[];if(t=t.map(function(s){if(!sa.test(s)){const m=Tn(s);if(m)s=m.text;else{const f=`no element with id: ${s}`;c.errorCallback(f),i.push(f)}}return s}),i.length)return Xi(c,"");const a=c.callback;a&&(c.callback=(s,m)=>{a(s,s?void 0:kt(e,m))});const u=ea(e,t,c);return u?kt(e,u):null}const fa=4,dt=5123;function la(e,t,n,r,o,c){n=n===void 0?fa:n;const i=t.indices,a=t.elementType,u=r===void 0?t.numElements:r;o=o===void 0?0:o,a||i?c!==void 0?e.drawElementsInstanced(n,u,a===void 0?dt:t.elementType,o,c):e.drawElements(n,u,a===void 0?dt:t.elementType,o):c!==void 0?e.drawArraysInstanced(n,o,u,c):e.drawArrays(n,o,u)}function ma(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(o){Pt(e,o,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}const xa={addExtensionsToContext:!0};function Wn(e){xt(e,xa),Hr(e),Cc(e)}function Kn(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return e.width!==n||e.height!==r?(e.width=n,e.height=r,!0):!1}const ya=`#version 300 es

in vec3 a_position;
in vec3 a_color;

out vec3 v_color;

void main() {
    v_color = a_color;
    gl_Position = vec4(a_position, 1.0f);
}`,Ea=`#version 300 es

precision mediump float;

in vec3 v_color;

out vec4 frag_color;

void main() {
    frag_color = vec4(v_color, 1.0f);
}`;function _a(e){Wn({attribPrefix:"a_"});const t=Yn(e,[ya,Ea]),r=ma(e,t,on(e,{position:{numComponents:3,data:[0,.5,0,-.5,-.5,0,.5,-.5,0]},color:{numComponents:3,data:[1,0,0,0,1,0,0,0,1]},indices:{numComponents:3,data:[0,1,2]}}));return o=>{Kn(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(t.program),Pt(e,t,r),la(e,r)}}const Ta=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 position;
in vec3 normal;
in vec2 texcoord;

out vec4 v_position;
out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = texcoord;
  v_position = u_worldViewProjection * position;
  v_normal = (u_worldInverseTranspose * vec4(normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * position)).xyz;
  gl_Position = v_position;
}
`,Aa=`#version 300 es

precision mediump float;

in vec4 v_position;
in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,X=Fr;function ba(e){Wn({attribPrefix:""});const t=Yn(e,[Ta,Aa]),r=on(e,{position:[1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1],normal:[1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1],texcoord:[1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}),o=dc(e,{min:e.NEAREST,mag:e.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),c={u_lightWorldPos:[1,8,-10],u_lightColor:[1,.8,.8,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1,u_diffuse:o,u_viewInverse:X.identity(),u_world:X.identity(),u_worldInverseTranspose:X.identity(),u_worldViewProjection:X.identity()};return i=>{i*=.001,Kn(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const a=30*Math.PI/180,u=e.canvas.clientWidth/e.canvas.clientHeight,f=X.perspective(a,u,.5,10),l=[1,4,-6],E=[0,0,0],x=[0,1,0],y=X.lookAt(l,E,x),_=X.inverse(y),T=X.multiply(f,_),A=X.rotationY(i);c.u_viewInverse=y,c.u_world=A,c.u_worldInverseTranspose=X.transpose(X.inverse(A)),c.u_worldViewProjection=X.multiply(T,A),e.useProgram(t.program),Pt(e,t,r),Xn(t,c),e.drawElements(e.TRIANGLES,r.numElements,e.UNSIGNED_SHORT,0)}}const wt={"hello-triangle":_a,"twgl-cube":ba};document.querySelector("#app").innerHTML=`
  <select id="example" style="position: absolute">
    ${Object.keys(wt).map(e=>`<option value="${e}">${e}</option>`).join(`
`)}
  </select>
  <div id="container"></div>
`;const _e=document.querySelector("#example"),ha=new URLSearchParams(location.search),Ht=ha.get("example");Ht!==null&&(_e.value=Ht);_e.addEventListener("change",()=>{const e=new URL(location.href);e.searchParams.set("example",_e.value),history.replaceState({},"",e),Xt(wt[_e.value],document.querySelector("#container"))});Xt(wt[_e.value],document.querySelector("#container"));
