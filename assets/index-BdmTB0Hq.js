(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function dt(e,t){const n=document.createElement("canvas");t.innerHTML="",t.appendChild(n);const r=n.getContext("webgl2");if(r===null)throw new Error("Error creating WebGL2 context.");const o=e(r),c=i=>{o(i),requestAnimationFrame(c)};requestAnimationFrame(c)}/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let ze=Float32Array;function Z(e,t,n){const r=new ze(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function gn(e,t,n){return n=n||new ze(3),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function Ct(e,t,n){n=n||new ze(3);const r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=r,n[2]=o,n}function Ke(e,t){t=t||new ze(3);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.sqrt(n);return r>1e-5?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}let R=Float32Array;function jn(e){const t=R;return R=e,t}function qn(e,t){return t=t||new R(16),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function Zn(){return new R(16).fill(0)}function Ht(e,t){return t=t||new R(16),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Xt(e){return e=e||new R(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jn(e,t){if(t=t||new R(16),t===e){let A;return A=e[1],e[1]=e[4],e[4]=A,A=e[2],e[2]=e[8],e[8]=A,A=e[3],e[3]=e[12],e[12]=A,A=e[6],e[6]=e[9],e[9]=A,A=e[7],e[7]=e[13],e[13]=A,A=e[11],e[11]=e[14],e[14]=A,t}const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],u=e[1*4+2],s=e[1*4+3],m=e[2*4+0],f=e[2*4+1],l=e[2*4+2],E=e[2*4+3],x=e[3*4+0],y=e[3*4+1],_=e[3*4+2],T=e[3*4+3];return t[0]=n,t[1]=i,t[2]=m,t[3]=x,t[4]=r,t[5]=a,t[6]=f,t[7]=y,t[8]=o,t[9]=u,t[10]=l,t[11]=_,t[12]=c,t[13]=s,t[14]=E,t[15]=T,t}function Yt(e,t){t=t||new R(16);const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],u=e[1*4+2],s=e[1*4+3],m=e[2*4+0],f=e[2*4+1],l=e[2*4+2],E=e[2*4+3],x=e[3*4+0],y=e[3*4+1],_=e[3*4+2],T=e[3*4+3],A=l*T,h=_*E,p=u*T,S=_*s,P=u*E,I=l*s,B=o*T,L=_*c,M=o*E,O=l*c,G=o*s,z=u*c,V=m*y,$=x*f,k=i*y,d=x*a,H=i*f,Re=m*a,Se=n*y,ve=x*r,Ie=n*f,Pe=m*r,we=n*a,Ne=i*r,Pt=A*a+S*f+P*y-(h*a+p*f+I*y),wt=h*r+B*f+O*y-(A*r+L*f+M*y),Nt=p*r+L*a+G*y-(S*r+B*a+z*y),Ut=I*r+M*a+z*f-(P*r+O*a+G*f),N=1/(n*Pt+i*wt+m*Nt+x*Ut);return t[0]=N*Pt,t[1]=N*wt,t[2]=N*Nt,t[3]=N*Ut,t[4]=N*(h*i+p*m+I*x-(A*i+S*m+P*x)),t[5]=N*(A*n+L*m+M*x-(h*n+B*m+O*x)),t[6]=N*(S*n+B*i+z*x-(p*n+L*i+G*x)),t[7]=N*(P*n+O*i+G*m-(I*n+M*i+z*m)),t[8]=N*(V*s+d*E+H*T-($*s+k*E+Re*T)),t[9]=N*($*c+Se*E+Pe*T-(V*c+ve*E+Ie*T)),t[10]=N*(k*c+ve*s+we*T-(d*c+Se*s+Ne*T)),t[11]=N*(Re*c+Ie*s+Ne*E-(H*c+Pe*s+we*E)),t[12]=N*(k*l+Re*_+$*u-(H*_+V*u+d*l)),t[13]=N*(Ie*_+V*o+ve*l-(Se*l+Pe*_+$*o)),t[14]=N*(Se*u+Ne*_+d*o-(we*_+k*o+ve*u)),t[15]=N*(we*l+H*o+Pe*u-(Ie*u+Ne*l+Re*o)),t}function Qn(e,t,n){n=n||new R(16);const r=e[0],o=e[1],c=e[2],i=e[3],a=e[4],u=e[5],s=e[6],m=e[7],f=e[8],l=e[9],E=e[10],x=e[11],y=e[12],_=e[13],T=e[14],A=e[15],h=t[0],p=t[1],S=t[2],P=t[3],I=t[4],B=t[5],L=t[6],M=t[7],O=t[8],G=t[9],z=t[10],V=t[11],$=t[12],k=t[13],d=t[14],H=t[15];return n[0]=r*h+a*p+f*S+y*P,n[1]=o*h+u*p+l*S+_*P,n[2]=c*h+s*p+E*S+T*P,n[3]=i*h+m*p+x*S+A*P,n[4]=r*I+a*B+f*L+y*M,n[5]=o*I+u*B+l*L+_*M,n[6]=c*I+s*B+E*L+T*M,n[7]=i*I+m*B+x*L+A*M,n[8]=r*O+a*G+f*z+y*V,n[9]=o*O+u*G+l*z+_*V,n[10]=c*O+s*G+E*z+T*V,n[11]=i*O+m*G+x*z+A*V,n[12]=r*$+a*k+f*d+y*H,n[13]=o*$+u*k+l*d+_*H,n[14]=c*$+s*k+E*d+T*H,n[15]=i*$+m*k+x*d+A*H,n}function er(e,t,n){return n=n||Xt(),e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function tr(e,t){return t=t||Z(),t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function nr(e,t,n){n=n||Z();const r=t*4;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n}function rr(e,t,n,r){r!==e&&(r=Ht(e,r));const o=n*4;return r[o+0]=t[0],r[o+1]=t[1],r[o+2]=t[2],r}function or(e,t,n,r,o){o=o||new R(16);const c=Math.tan(Math.PI*.5-.5*e),i=1/(n-r);return o[0]=c/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*i*2,o[15]=0,o}function cr(e,t,n,r,o,c,i){return i=i||new R(16),i[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(r-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-c),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(r+n)/(n-r),i[14]=(c+o)/(o-c),i[15]=1,i}function ir(e,t,n,r,o,c,i){i=i||new R(16);const a=t-e,u=r-n,s=o-c;return i[0]=2*o/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/u,i[6]=0,i[7]=0,i[8]=(e+t)/a,i[9]=(r+n)/u,i[10]=c/s,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*c/s,i[15]=0,i}let g,ne,K;function ar(e,t,n,r){return r=r||new R(16),g=g||Z(),ne=ne||Z(),K=K||Z(),Ke(gn(e,t,K),K),Ke(Ct(n,K,g),g),Ke(Ct(K,g,ne),ne),r[0]=g[0],r[1]=g[1],r[2]=g[2],r[3]=0,r[4]=ne[0],r[5]=ne[1],r[6]=ne[2],r[7]=0,r[8]=K[0],r[9]=K[1],r[10]=K[2],r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function ur(e,t){return t=t||new R(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function sr(e,t,n){n=n||new R(16);const r=t[0],o=t[1],c=t[2],i=e[0],a=e[1],u=e[2],s=e[3],m=e[1*4+0],f=e[1*4+1],l=e[1*4+2],E=e[1*4+3],x=e[2*4+0],y=e[2*4+1],_=e[2*4+2],T=e[2*4+3],A=e[3*4+0],h=e[3*4+1],p=e[3*4+2],S=e[3*4+3];return e!==n&&(n[0]=i,n[1]=a,n[2]=u,n[3]=s,n[4]=m,n[5]=f,n[6]=l,n[7]=E,n[8]=x,n[9]=y,n[10]=_,n[11]=T),n[12]=i*r+m*o+x*c+A,n[13]=a*r+f*o+y*c+h,n[14]=u*r+l*o+_*c+p,n[15]=s*r+E*o+T*c+S,n}function fr(e,t){t=t||new R(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lr(e,t,n){n=n||new R(16);const r=e[4],o=e[5],c=e[6],i=e[7],a=e[8],u=e[9],s=e[10],m=e[11],f=Math.cos(t),l=Math.sin(t);return n[4]=f*r+l*a,n[5]=f*o+l*u,n[6]=f*c+l*s,n[7]=f*i+l*m,n[8]=f*a-l*r,n[9]=f*u-l*o,n[10]=f*s-l*c,n[11]=f*m-l*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function mr(e,t){t=t||new R(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xr(e,t,n){n=n||new R(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[2*4+0],u=e[2*4+1],s=e[2*4+2],m=e[2*4+3],f=Math.cos(t),l=Math.sin(t);return n[0]=f*r-l*a,n[1]=f*o-l*u,n[2]=f*c-l*s,n[3]=f*i-l*m,n[8]=f*a+l*r,n[9]=f*u+l*o,n[10]=f*s+l*c,n[11]=f*m+l*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function yr(e,t){t=t||new R(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Er(e,t,n){n=n||new R(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[1*4+0],u=e[1*4+1],s=e[1*4+2],m=e[1*4+3],f=Math.cos(t),l=Math.sin(t);return n[0]=f*r+l*a,n[1]=f*o+l*u,n[2]=f*c+l*s,n[3]=f*i+l*m,n[4]=f*a-l*r,n[5]=f*u-l*o,n[6]=f*s-l*c,n[7]=f*m-l*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function _r(e,t,n){n=n||new R(16);let r=e[0],o=e[1],c=e[2];const i=Math.sqrt(r*r+o*o+c*c);r/=i,o/=i,c/=i;const a=r*r,u=o*o,s=c*c,m=Math.cos(t),f=Math.sin(t),l=1-m;return n[0]=a+(1-a)*m,n[1]=r*o*l+c*f,n[2]=r*c*l-o*f,n[3]=0,n[4]=r*o*l-c*f,n[5]=u+(1-u)*m,n[6]=o*c*l+r*f,n[7]=0,n[8]=r*c*l+o*f,n[9]=o*c*l-r*f,n[10]=s+(1-s)*m,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Tr(e,t,n,r){r=r||new R(16);let o=t[0],c=t[1],i=t[2];const a=Math.sqrt(o*o+c*c+i*i);o/=a,c/=a,i/=a;const u=o*o,s=c*c,m=i*i,f=Math.cos(n),l=Math.sin(n),E=1-f,x=u+(1-u)*f,y=o*c*E+i*l,_=o*i*E-c*l,T=o*c*E-i*l,A=s+(1-s)*f,h=c*i*E+o*l,p=o*i*E+c*l,S=c*i*E-o*l,P=m+(1-m)*f,I=e[0],B=e[1],L=e[2],M=e[3],O=e[4],G=e[5],z=e[6],V=e[7],$=e[8],k=e[9],d=e[10],H=e[11];return r[0]=x*I+y*O+_*$,r[1]=x*B+y*G+_*k,r[2]=x*L+y*z+_*d,r[3]=x*M+y*V+_*H,r[4]=T*I+A*O+h*$,r[5]=T*B+A*G+h*k,r[6]=T*L+A*z+h*d,r[7]=T*M+A*V+h*H,r[8]=p*I+S*O+P*$,r[9]=p*B+S*G+P*k,r[10]=p*L+S*z+P*d,r[11]=p*M+S*V+P*H,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function Ar(e,t){return t=t||new R(16),t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function br(e,t,n){n=n||new R(16);const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0],n[1]=r*e[0*4+1],n[2]=r*e[0*4+2],n[3]=r*e[0*4+3],n[4]=o*e[1*4+0],n[5]=o*e[1*4+1],n[6]=o*e[1*4+2],n[7]=o*e[1*4+3],n[8]=c*e[2*4+0],n[9]=c*e[2*4+1],n[10]=c*e[2*4+2],n[11]=c*e[2*4+3],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function hr(e,t,n){n=n||Z();const r=t[0],o=t[1],c=t[2],i=r*e[0*4+3]+o*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function pr(e,t,n){n=n||Z();const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0],n[1]=r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1],n[2]=r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2],n}function Fr(e,t,n){n=n||Z();const r=Yt(e),o=t[0],c=t[1],i=t[2];return n[0]=o*r[0*4+0]+c*r[0*4+1]+i*r[0*4+2],n[1]=o*r[1*4+0]+c*r[1*4+1]+i*r[1*4+2],n[2]=o*r[2*4+0]+c*r[2*4+1]+i*r[2*4+2],n}var Rr=Object.freeze({__proto__:null,axisRotate:Tr,axisRotation:_r,copy:Ht,create:Zn,frustum:ir,getAxis:nr,getTranslation:tr,identity:Xt,inverse:Yt,lookAt:ar,multiply:Qn,negate:qn,ortho:cr,perspective:or,rotateX:lr,rotateY:xr,rotateZ:Er,rotationX:fr,rotationY:mr,rotationZ:yr,scale:br,scaling:Ar,setAxis:rr,setDefaultType:jn,setTranslation:er,transformDirection:pr,transformNormal:Fr,transformPoint:hr,translate:sr,translation:ur,transpose:Jn});const it=5120,Te=5121,at=5122,ut=5123,st=5124,ft=5125,lt=5126,Sr=32819,vr=32820,Ir=33635,Pr=5131,wr=33640,Nr=35899,Ur=35902,Cr=36269,Dr=34042,Wt={};{const e=Wt;e[it]=Int8Array,e[Te]=Uint8Array,e[at]=Int16Array,e[ut]=Uint16Array,e[st]=Int32Array,e[ft]=Uint32Array,e[lt]=Float32Array,e[Sr]=Uint16Array,e[vr]=Uint16Array,e[Ir]=Uint16Array,e[Pr]=Uint16Array,e[wr]=Uint32Array,e[Nr]=Uint32Array,e[Ur]=Uint32Array,e[Cr]=Uint32Array,e[Dr]=Uint32Array}function mt(e){if(e instanceof Int8Array)return it;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Te;if(e instanceof Int16Array)return at;if(e instanceof Uint16Array)return ut;if(e instanceof Int32Array)return st;if(e instanceof Uint32Array)return ft;if(e instanceof Float32Array)return lt;throw new Error("unsupported typed array type")}function Kt(e){if(e===Int8Array)return it;if(e===Uint8Array||e===Uint8ClampedArray)return Te;if(e===Int16Array)return at;if(e===Uint16Array)return ut;if(e===Int32Array)return st;if(e===Uint32Array)return ft;if(e===Float32Array)return lt;throw new Error("unsupported typed array type")}function gt(e){const t=Wt[e];if(!t)throw new Error("unknown gl type");return t}const Be=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function jt(...e){console.error(...e)}const Dt=new Map;function xt(e,t){if(!e||typeof e!="object")return!1;let n=Dt.get(t);n||(n=new WeakMap,Dt.set(t,n));let r=n.get(e);if(r===void 0){const o=Object.prototype.toString.call(e);r=o.substring(8,o.length-1)===t,n.set(e,r)}return r}function Br(e,t){return typeof WebGLBuffer<"u"&&xt(t,"WebGLBuffer")}function qt(e,t){return typeof WebGLTexture<"u"&&xt(t,"WebGLTexture")}function Lr(e,t){return typeof WebGLSampler<"u"&&xt(t,"WebGLSampler")}const Zt=35044,ae=34962,Mr=34963,Or=34660,Gr=5120,zr=5121,Vr=5122,$r=5123,kr=5124,dr=5125,Jt=5126,Qt={attribPrefix:""};function Hr(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||Zt)}function en(e,t,n,r){if(Br(e,t))return t;n=n||ae;const o=e.createBuffer();return Hr(e,n,o,t,r),o}function tn(e){return e==="indices"}function Xr(e){return e===Int8Array||e===Uint8Array}function Yr(e){return e.length?e:e.data}const Wr=/coord|texture/i,Kr=/color|colour/i;function gr(e,t){let n;if(Wr.test(e)?n=2:Kr.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function jr(e,t,n){return e.numComponents||e.size||gr(t,n||Yr(e).length)}function nn(e,t){if(Be(e))return e;if(Be(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?yt(e.type):void 0;return n||(tn(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function qr(e){return typeof e=="number"?e:e?Kt(e):Jt}function yt(e){return typeof e=="number"?gt(e):e||Float32Array}function Zr(e,t){return{buffer:t.buffer,numValues:2*3*4,type:qr(t.type),arrayType:yt(t.type)}}function Jr(e,t){const n=t.data||t,r=yt(t.type),o=n*r.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(ae,c),e.bufferData(ae,o,t.drawType||Zt),{buffer:c,numValues:n,type:Kt(r),arrayType:r}}function Qr(e,t,n){const r=nn(t,n);return{arrayType:r.constructor,buffer:en(e,r,void 0,t.drawType),type:mt(r),numValues:0}}function eo(e,t){const n={};return Object.keys(t).forEach(function(r){if(!tn(r)){const o=t[r],c=o.attrib||o.name||o.attribName||Qt.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!Be(o.value))throw new Error("array.value is not array or typedarray");n[c]={value:o.value}}else{let i;o.buffer&&o.buffer instanceof WebGLBuffer?i=Zr:typeof o=="number"||typeof o.data=="number"?i=Jr:i=Qr;const{buffer:a,type:u,numValues:s,arrayType:m}=i(e,o,r),f=o.normalize!==void 0?o.normalize:Xr(m),l=jr(o,r,s);n[c]={buffer:a,numComponents:l,type:u,normalize:f,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(ae,null),n}function to(e,t){return t===Gr||t===zr?1:t===Vr||t===$r?2:t===kr||t===dr||t===Jt?4:0}const ge=["position","positions","a_position"];function no(e,t){let n,r;for(r=0;r<ge.length&&(n=ge[r],!(n in t||(n=Qt.attribPrefix+n,n in t)));++r);r===ge.length&&(n=Object.keys(t)[0]);const o=t[n];if(!o.buffer)return 1;e.bindBuffer(ae,o.buffer);const c=e.getBufferParameter(ae,Or);e.bindBuffer(ae,null);const i=to(e,o.type),a=c/i,u=o.numComponents||o.size,s=a/u;if(s%1!==0)throw new Error(`numComponents ${u} not correct for length ${length}`);return s}function rn(e,t,n){const r=eo(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const c=t.indices;if(c){const i=nn(c,"indices");o.indices=en(e,i,Mr),o.numElements=i.length,o.elementType=mt(i)}else o.numElements||(o.numElements=no(e,o.attribs));return o}function he(e){return!!e.texStorage2D}const on=function(){const e={},t={};function n(r){const o=r.constructor.name;if(!e[o]){for(const c in r)if(typeof r[c]=="number"){const i=t[r[c]];t[r[c]]=i?`${i} | ${c}`:c}e[o]=!0}}return function(o,c){return n(o),t[c]||(typeof c=="number"?`0x${c.toString(16)}`:c)}}(),Q={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Ae=Be,cn=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Ze=6406,Y=6407,F=6408,Je=6409,Qe=6410,le=6402,et=34041,Le=33071,ro=9728,oo=9729,ee=3553,J=34067,ue=32879,se=35866,Et=34069,co=34070,io=34071,ao=34072,uo=34073,so=34074,tt=10241,nt=10240,Me=10242,Oe=10243,Bt=32882,fo=33082,lo=33083,mo=33084,xo=33085,yo=34892,Eo=34893,_t=3317,an=3314,un=32878,sn=3316,fn=3315,ln=32877,_o=37443,To=37441,Ao=37440,bo=33321,ho=36756,po=33325,Fo=33326,Ro=33330,So=33329,vo=33338,Io=33337,Po=33340,wo=33339,No=33323,Uo=36757,Co=33327,Do=33328,Bo=33336,Lo=33335,Mo=33332,Oo=33331,Go=33334,zo=33333,Vo=32849,$o=35905,ko=36194,Ho=36758,Xo=35898,Yo=35901,Wo=34843,Ko=34837,go=36221,jo=36239,qo=36215,Zo=36233,Jo=36209,Qo=36227,ec=32856,tc=35907,nc=36759,rc=32855,oc=32854,cc=32857,ic=34842,ac=34836,uc=36220,sc=36238,fc=36975,lc=36214,mc=36232,xc=36226,yc=36208,Ec=33189,_c=33190,Tc=36012,Ac=36013,bc=35056,j=5120,v=5121,Ue=5122,fe=5123,Ce=5124,re=5125,U=5126,Lt=32819,Mt=32820,Ot=33635,W=5131,xe=36193,je=33640,hc=35899,pc=35902,Fc=36269,Rc=34042,ye=33319,oe=33320,Ee=6403,ce=36244,ie=36248,q=36249,Sc={};{const e=Sc;e[Ze]={numColorComponents:1},e[Je]={numColorComponents:1},e[Qe]={numColorComponents:2},e[Y]={numColorComponents:3},e[F]={numColorComponents:4},e[Ee]={numColorComponents:1},e[ce]={numColorComponents:1},e[ye]={numColorComponents:2},e[oe]={numColorComponents:2},e[Y]={numColorComponents:3},e[ie]={numColorComponents:3},e[F]={numColorComponents:4},e[q]={numColorComponents:4},e[le]={numColorComponents:1},e[et]={numColorComponents:2}}let qe;function Ve(e){if(!qe){const t={};t[Ze]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[v,W,xe,U]},t[Je]={textureFormat:Je,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[v,W,xe,U]},t[Qe]={textureFormat:Qe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[v,W,xe,U]},t[Y]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[v,W,xe,U,Ot]},t[F]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[v,W,xe,U,Lt,Mt]},t[le]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[re,fe]},t[bo]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[v]},t[ho]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[j]},t[po]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[U,W]},t[Fo]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[Ro]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[v]},t[So]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[j]},t[Mo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[fe]},t[Oo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ue]},t[Go]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},t[zo]={textureFormat:ce,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ce]},t[No]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[v]},t[Uo]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[j]},t[Co]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[U,W]},t[Do]={textureFormat:ye,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[U]},t[Bo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[v]},t[Lo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[j]},t[vo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fe]},t[Io]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ue]},t[Po]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[re]},t[wo]={textureFormat:oe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ce]},t[Vo]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[v]},t[$o]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[v]},t[ko]={textureFormat:Y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[v,Ot]},t[Ho]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[j]},t[Xo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[U,W,hc]},t[Yo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[U,W,pc]},t[Wo]={textureFormat:Y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[U,W]},t[Ko]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[U]},t[go]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[v]},t[jo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[j]},t[qo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[fe]},t[Zo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ue]},t[Jo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[re]},t[Qo]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ce]},t[ec]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[v]},t[tc]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[v]},t[nc]={textureFormat:F,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[j]},t[rc]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[v,Mt,je]},t[oc]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[v,Lt]},t[cc]={textureFormat:F,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[je]},t[ic]={textureFormat:F,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[U,W]},t[ac]={textureFormat:F,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[U]},t[uc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[v]},t[sc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[j]},t[fc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[je]},t[lc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[fe]},t[mc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ue]},t[xc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ce]},t[yc]={textureFormat:q,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[re]},t[Ec]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[fe,re]},t[_c]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},t[Tc]={textureFormat:le,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[bc]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Rc]},t[Ac]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fc]},Object.keys(t).forEach(function(n){const r=t[n];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(o,c){const i=r.type[c];r.bytesPerElementMap[i]=o})}),qe=t}return qe[e]}function vc(e,t){const n=Ve(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function pe(e){const t=Ve(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Gt(e){return(e&e-1)===0}function Ic(e,t,n,r){if(!he(e))return Gt(t)&&Gt(n);const o=Ve(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function Pc(e){const t=Ve(e);if(!t)throw"unknown internal format";return t.textureFilterable}function wc(e,t,n){return Ae(t)?mt(t):n||v}function De(e,t,n,r,o){if(o%1!==0)throw"can't guess dimensions";if(!n&&!r){const c=Math.sqrt(o/(t===J?6:1));c%1===0?(n=c,r=c):(n=o,r=1)}else if(r){if(!n&&(n=o/r,n%1))throw"can't guess dimensions"}else if(r=o/n,r%1)throw"can't guess dimensions";return{width:n,height:r}}function me(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(_o,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(To,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(Ao,t.flipY)}function mn(e){e.pixelStorei(_t,4),he(e)&&(e.pixelStorei(an,0),e.pixelStorei(un,0),e.pixelStorei(sn,0),e.pixelStorei(fn,0),e.pixelStorei(ln,0))}function Nc(e,t,n,r){r.minMag&&(n.call(e,t,tt,r.minMag),n.call(e,t,nt,r.minMag)),r.min&&n.call(e,t,tt,r.min),r.mag&&n.call(e,t,nt,r.mag),r.wrap&&(n.call(e,t,Me,r.wrap),n.call(e,t,Oe,r.wrap),(t===ue||Lr(e,t))&&n.call(e,t,Bt,r.wrap)),r.wrapR&&n.call(e,t,Bt,r.wrapR),r.wrapS&&n.call(e,t,Me,r.wrapS),r.wrapT&&n.call(e,t,Oe,r.wrapT),r.minLod!==void 0&&n.call(e,t,fo,r.minLod),r.maxLod!==void 0&&n.call(e,t,lo,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,mo,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,xo,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,Eo,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,yo,r.compareMode)}function xn(e,t,n){const r=n.target||ee;e.bindTexture(r,t),Nc(e,r,e.texParameteri,n)}function Uc(e){return e=e||Q.textureColor,Ae(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function rt(e,t,n,r,o,c){n=n||Q.textureOptions,c=c||F;const i=n.target||ee;if(r=r||n.width,o=o||n.height,e.bindTexture(i,t),Ic(e,r,o,c))e.generateMipmap(i);else{const a=Pc(c)?oo:ro;e.texParameteri(i,tt,a),e.texParameteri(i,nt,a),e.texParameteri(i,Me,Le),e.texParameteri(i,Oe,Le)}}function be(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function ot(e,t){return t=t||{},t.cubeFaceOrder||[Et,co,io,ao,uo,so]}function ct(e,t){const r=ot(e,t).map(function(o,c){return{face:o,ndx:c}});return r.sort(function(o,c){return o.face-c.face}),r}function yn(e,t,n,r){r=r||Q.textureOptions;const o=r.target||ee,c=r.level||0;let i=n.width,a=n.height;const u=r.internalFormat||r.format||F,s=pe(u),m=r.format||s.format,f=r.type||s.type;if(me(e,r),e.bindTexture(o,t),o===J){const l=n.width,E=n.height;let x,y;if(l/6===E)x=E,y=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===l)x=l,y=[0,0,0,1,0,2,0,3,0,4,0,5];else if(l/3===E/2)x=l/3,y=[0,0,1,0,2,0,0,1,1,1,2,1];else if(l/2===E/3)x=l/2,y=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const _=cn();_?(_.canvas.width=x,_.canvas.height=x,i=x,a=x,ct(e,r).forEach(function(T){const A=y[T.ndx*2+0]*x,h=y[T.ndx*2+1]*x;_.drawImage(n,A,h,x,x,0,0,x,x),e.texImage2D(T.face,c,u,m,f,_.canvas)}),_.canvas.width=1,_.canvas.height=1):typeof createImageBitmap<"u"&&(i=x,a=x,ct(e,r).forEach(function(T){const A=y[T.ndx*2+0]*x,h=y[T.ndx*2+1]*x;e.texImage2D(T.face,c,u,x,x,0,m,f,null),createImageBitmap(n,A,h,x,x,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(p){me(e,r),e.bindTexture(o,t),e.texImage2D(T.face,c,u,m,f,p),be(r)&&rt(e,t,r,i,a,u)})}))}else if(o===ue||o===se){const l=Math.min(n.width,n.height),E=Math.max(n.width,n.height),x=E/l;if(x%1!==0)throw"can not compute 3D dimensions of element";const y=n.width===E?1:0,_=n.height===E?1:0;e.pixelStorei(_t,1),e.pixelStorei(an,n.width),e.pixelStorei(un,0),e.pixelStorei(ln,0),e.texImage3D(o,c,u,l,l,l,0,m,f,null);for(let T=0;T<x;++T){const A=T*l*y,h=T*l*_;e.pixelStorei(sn,A),e.pixelStorei(fn,h),e.texSubImage3D(o,c,0,0,T,l,l,1,m,f,n)}mn(e)}else e.texImage2D(o,c,u,m,f,n);be(r)&&rt(e,t,r,i,a,u),xn(e,t,r)}function Fe(){}function Cc(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function Dc(e,t){return t===void 0&&!Cc(e)?"anonymous":t}function Bc(e,t,n){n=n||Fe;let r;if(t=t!==void 0?t:Q.crossOrigin,t=Dc(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",c),r.removeEventListener("load",i),r=null},c=function(){const u="couldn't load image: "+e;jt(u),n(u,r),o()},i=function(){n(null,r),o()};return r.addEventListener("error",c),r.addEventListener("load",i),r.src=e,r}else if(typeof ImageBitmap<"u"){let o,c;const i=function(){n(o,c)},a={};t&&(a.mode="cors"),fetch(e,a).then(function(u){if(!u.ok)throw u;return u.blob()}).then(function(u){return createImageBitmap(u,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(u){c=u,setTimeout(i)}).catch(function(u){o=u,setTimeout(i)}),r=null}return r}function En(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function Tt(e,t,n){return En(e)?(setTimeout(function(){n(null,e)}),e):Bc(e,t,n)}function At(e,t,n){n=n||Q.textureOptions;const r=n.target||ee;if(e.bindTexture(r,t),n.color===!1)return;const o=Uc(n.color);if(r===J)for(let c=0;c<6;++c)e.texImage2D(Et+c,0,F,1,1,0,F,v,o);else r===ue||r===se?e.texImage3D(r,0,F,1,1,1,0,F,v,o):e.texImage2D(r,0,F,1,1,0,F,v,o)}function Lc(e,t,n,r){return r=r||Fe,n=n||Q.textureOptions,At(e,t,n),n=Object.assign({},n),Tt(n.src,n.crossOrigin,function(c,i){c?r(c,t,i):(yn(e,t,i,n),r(null,t,i))})}function Mc(e,t,n,r){r=r||Fe;const o=n.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const c=n.level||0,i=n.internalFormat||n.format||F,a=pe(i),u=n.format||a.format,s=n.type||v,m=n.target||ee;if(m!==J)throw"target must be TEXTURE_CUBE_MAP";At(e,t,n),n=Object.assign({},n);let f=6;const l=[],E=ot(e,n);let x;function y(_){return function(T,A){--f,T?l.push(T):A.width!==A.height?l.push("cubemap face img is not a square: "+A.src):(me(e,n),e.bindTexture(m,t),f===5?ot().forEach(function(h){e.texImage2D(h,c,i,u,s,A)}):e.texImage2D(_,c,i,u,s,A),be(n)&&e.generateMipmap(m)),f===0&&r(l.length?l:void 0,t,x)}}x=o.map(function(_,T){return Tt(_,n.crossOrigin,y(E[T]))})}function Oc(e,t,n,r){r=r||Fe;const o=n.src,c=n.internalFormat||n.format||F,i=pe(c),a=n.format||i.format,u=n.type||v,s=n.target||se;if(s!==ue&&s!==se)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";At(e,t,n),n=Object.assign({},n);let m=o.length;const f=[];let l;const E=n.level||0;let x=n.width,y=n.height;const _=o.length;let T=!0;function A(h){return function(p,S){if(--m,p)f.push(p);else{if(me(e,n),e.bindTexture(s,t),T){T=!1,x=n.width||S.width,y=n.height||S.height,e.texImage3D(s,E,c,x,y,_,0,a,u,null);for(let P=0;P<_;++P)e.texSubImage3D(s,E,0,0,P,x,y,1,a,u,S)}else{let P=S,I;(S.width!==x||S.height!==y)&&(I=cn(),P=I.canvas,I.canvas.width=x,I.canvas.height=y,I.drawImage(S,0,0,x,y)),e.texSubImage3D(s,E,0,0,h,x,y,1,a,u,P),I&&P===I.canvas&&(I.canvas.width=0,I.canvas.height=0)}be(n)&&e.generateMipmap(s)}m===0&&r(f.length?f:void 0,t,l)}}l=o.map(function(h,p){return Tt(h,n.crossOrigin,A(p))})}function Gc(e,t,n,r){r=r||Q.textureOptions;const o=r.target||ee;e.bindTexture(o,t);let c=r.width,i=r.height,a=r.depth;const u=r.level||0,s=r.internalFormat||r.format||F,m=pe(s),f=r.format||m.format,l=r.type||wc(e,n,m.type);if(Ae(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const _=gt(l);n=new _(n)}const E=vc(s,l),x=n.byteLength/E;if(x%1)throw"length wrong size for format: "+on(e,f);let y;if(o===ue||o===se)if(!c&&!i&&!a){const _=Math.cbrt(x);if(_%1!==0)throw"can't guess cube size of array of numElements: "+x;c=_,i=_,a=_}else c&&(!i||!a)?(y=De(e,o,i,a,x/c),i=y.width,a=y.height):i&&(!c||!a)?(y=De(e,o,c,a,x/i),c=y.width,a=y.height):(y=De(e,o,c,i,x/a),c=y.width,i=y.height);else y=De(e,o,c,i,x),c=y.width,i=y.height;if(mn(e),e.pixelStorei(_t,r.unpackAlignment||1),me(e,r),o===J){const _=E/n.BYTES_PER_ELEMENT,T=x/6*_;ct(e,r).forEach(A=>{const h=T*A.ndx,p=n.subarray(h,h+T);e.texImage2D(A.face,u,s,c,i,0,f,l,p)})}else o===ue||o===se?e.texImage3D(o,u,s,c,i,a,0,f,l,n):e.texImage2D(o,u,s,c,i,0,f,l,n);return{width:c,height:i,depth:a,type:l}}function zc(e,t,n){const r=n.target||ee;e.bindTexture(r,t);const o=n.level||0,c=n.internalFormat||n.format||F,i=pe(c),a=n.format||i.format,u=n.type||i.type;if(me(e,n),r===J)for(let s=0;s<6;++s)e.texImage2D(Et+s,o,c,n.width,n.height,0,a,u,null);else r===ue||r===se?e.texImage3D(r,o,c,n.width,n.height,n.depth,0,a,u,null):e.texImage2D(r,o,c,n.width,n.height,0,a,u,null)}function Vc(e,t,n){n=n||Fe,t=t||Q.textureOptions;const r=e.createTexture(),o=t.target||ee;let c=t.width||1,i=t.height||1;const a=t.internalFormat||F;e.bindTexture(o,r),o===J&&(e.texParameteri(o,Me,Le),e.texParameteri(o,Oe,Le));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")Lc(e,r,t,n);else if(Ae(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||Ae(u[0]))){const s=Gc(e,r,u,t);c=s.width,i=s.height}else Array.isArray(u)&&(typeof u[0]=="string"||En(u[0]))?o===J?Mc(e,r,t,n):Oc(e,r,t,n):(yn(e,r,u,t),c=u.width,i=u.height);else zc(e,r,t);return be(t)&&rt(e,r,t,c,i,a),xn(e,r,t),r}const bt=jt;function _n(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const Ge=33984,$e=34962,$c=34963,kc=35713,dc=35714,Hc=35632,Xc=35633,Yc=35981,Tn=35718,Wc=35721,Kc=35971,gc=35382,jc=35396,qc=35398,Zc=35392,Jc=35395,ke=5126,An=35664,bn=35665,hn=35666,ht=5124,pn=35667,Fn=35668,Rn=35669,Sn=35670,vn=35671,In=35672,Pn=35673,wn=35674,Nn=35675,Un=35676,Qc=35678,ei=35680,ti=35679,ni=35682,ri=35685,oi=35686,ci=35687,ii=35688,ai=35689,ui=35690,si=36289,fi=36292,li=36293,pt=5125,Cn=36294,Dn=36295,Bn=36296,mi=36298,xi=36299,yi=36300,Ei=36303,_i=36306,Ti=36307,Ai=36308,bi=36311,de=3553,He=34067,Ft=32879,Xe=35866,b={};function Ln(e,t){return b[t].bindPoint}function hi(e,t){return function(n){e.uniform1f(t,n)}}function pi(e,t){return function(n){e.uniform1fv(t,n)}}function Fi(e,t){return function(n){e.uniform2fv(t,n)}}function Ri(e,t){return function(n){e.uniform3fv(t,n)}}function Si(e,t){return function(n){e.uniform4fv(t,n)}}function Mn(e,t){return function(n){e.uniform1i(t,n)}}function On(e,t){return function(n){e.uniform1iv(t,n)}}function Gn(e,t){return function(n){e.uniform2iv(t,n)}}function zn(e,t){return function(n){e.uniform3iv(t,n)}}function Vn(e,t){return function(n){e.uniform4iv(t,n)}}function vi(e,t){return function(n){e.uniform1ui(t,n)}}function Ii(e,t){return function(n){e.uniform1uiv(t,n)}}function Pi(e,t){return function(n){e.uniform2uiv(t,n)}}function wi(e,t){return function(n){e.uniform3uiv(t,n)}}function Ni(e,t){return function(n){e.uniform4uiv(t,n)}}function Ui(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Ci(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Di(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Bi(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Li(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Mi(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Oi(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Gi(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function zi(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function C(e,t,n,r){const o=Ln(e,t);return he(e)?function(c){let i,a;!c||qt(e,c)?(i=c,a=null):(i=c.texture,a=c.sampler),e.uniform1i(r,n),e.activeTexture(Ge+n),e.bindTexture(o,i),e.bindSampler(n,a)}:function(c){e.uniform1i(r,n),e.activeTexture(Ge+n),e.bindTexture(o,c)}}function D(e,t,n,r,o){const c=Ln(e,t),i=new Int32Array(o);for(let a=0;a<o;++a)i[a]=n+a;return he(e)?function(a){e.uniform1iv(r,i),a.forEach(function(u,s){e.activeTexture(Ge+i[s]);let m,f;!u||qt(e,u)?(m=u,f=null):(m=u.texture,f=u.sampler),e.bindSampler(n,f),e.bindTexture(c,m)})}:function(a){e.uniform1iv(r,i),a.forEach(function(u,s){e.activeTexture(Ge+i[s]),e.bindTexture(c,u)})}}b[ke]={Type:Float32Array,size:4,setter:hi,arraySetter:pi};b[An]={Type:Float32Array,size:8,setter:Fi,cols:2};b[bn]={Type:Float32Array,size:12,setter:Ri,cols:3};b[hn]={Type:Float32Array,size:16,setter:Si,cols:4};b[ht]={Type:Int32Array,size:4,setter:Mn,arraySetter:On};b[pn]={Type:Int32Array,size:8,setter:Gn,cols:2};b[Fn]={Type:Int32Array,size:12,setter:zn,cols:3};b[Rn]={Type:Int32Array,size:16,setter:Vn,cols:4};b[pt]={Type:Uint32Array,size:4,setter:vi,arraySetter:Ii};b[Cn]={Type:Uint32Array,size:8,setter:Pi,cols:2};b[Dn]={Type:Uint32Array,size:12,setter:wi,cols:3};b[Bn]={Type:Uint32Array,size:16,setter:Ni,cols:4};b[Sn]={Type:Uint32Array,size:4,setter:Mn,arraySetter:On};b[vn]={Type:Uint32Array,size:8,setter:Gn,cols:2};b[In]={Type:Uint32Array,size:12,setter:zn,cols:3};b[Pn]={Type:Uint32Array,size:16,setter:Vn,cols:4};b[wn]={Type:Float32Array,size:32,setter:Ui,rows:2,cols:2};b[Nn]={Type:Float32Array,size:48,setter:Ci,rows:3,cols:3};b[Un]={Type:Float32Array,size:64,setter:Di,rows:4,cols:4};b[ri]={Type:Float32Array,size:32,setter:Bi,rows:2,cols:3};b[oi]={Type:Float32Array,size:32,setter:Mi,rows:2,cols:4};b[ci]={Type:Float32Array,size:48,setter:Li,rows:3,cols:2};b[ii]={Type:Float32Array,size:48,setter:Gi,rows:3,cols:4};b[ai]={Type:Float32Array,size:64,setter:Oi,rows:4,cols:2};b[ui]={Type:Float32Array,size:64,setter:zi,rows:4,cols:3};b[Qc]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[ei]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[ti]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Ft};b[ni]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[si]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[fi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[li]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[mi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[xi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Ft};b[yi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[Ei]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};b[_i]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:de};b[Ti]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Ft};b[Ai]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:He};b[bi]={Type:null,size:0,setter:C,arraySetter:D,bindPoint:Xe};function Ye(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer($e,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||ke,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function te(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer($e,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||ht,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function We(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer($e,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||pt,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Rt(e,t,n){const r=n.size,o=n.count;return function(c){e.bindBuffer($e,c.buffer);const i=c.size||c.numComponents||r,a=i/o,u=c.type||ke,m=b[u].size*i,f=c.normalize||!1,l=c.offset||0,E=m/o;for(let x=0;x<o;++x)e.enableVertexAttribArray(t+x),e.vertexAttribPointer(t+x,a,u,f,m,l+E*x),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+x,c.divisor||0)}}const w={};w[ke]={size:4,setter:Ye};w[An]={size:8,setter:Ye};w[bn]={size:12,setter:Ye};w[hn]={size:16,setter:Ye};w[ht]={size:4,setter:te};w[pn]={size:8,setter:te};w[Fn]={size:12,setter:te};w[Rn]={size:16,setter:te};w[pt]={size:4,setter:We};w[Cn]={size:8,setter:We};w[Dn]={size:12,setter:We};w[Bn]={size:16,setter:We};w[Sn]={size:4,setter:te};w[vn]={size:8,setter:te};w[In]={size:12,setter:te};w[Pn]={size:16,setter:te};w[wn]={size:4,setter:Rt,count:2};w[Nn]={size:9,setter:Rt,count:3};w[Un]={size:16,setter:Rt,count:4};const Vi=/ERROR:\s*\d+:(\d+)/gi;function $i(e,t="",n=0){const r=[...t.matchAll(Vi)],o=new Map(r.map((c,i)=>{const a=parseInt(c[1]),u=r[i+1],s=u?u.index:t.length,m=t.substring(c.index,s);return[a-1,m]}));return e.split(`
`).map((c,i)=>{const a=o.get(i);return`${i+1+n}: ${c}${a?`

^^^ ${a}`:""}`}).join(`
`)}const zt=/^[ \t]*\n/;function $n(e){let t=0;return zt.test(e)&&(t=1,e=e.replace(zt,"")),{lineOffset:t,shaderSource:e}}function ki(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function di(e,t,n,r){if(r=r||bt,!e.getShaderParameter(n,kc)){const c=e.getShaderInfoLog(n),{lineOffset:i,shaderSource:a}=$n(e.getShaderSource(n)),u=`${$i(a,c,i)}
Error compiling ${on(e,t)}: ${c}`;return r(u),u}return""}function St(e,t,n){let r,o,c;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const s=e;n=s.errorCallback,e=s.attribLocations,r=s.transformFeedbackVaryings,o=s.transformFeedbackMode,c=s.callback}const i=n||bt,a=[],u={errorCallback(s,...m){a.push(s),i(s,...m)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:c,errors:a};{let s={};Array.isArray(e)?e.forEach(function(m,f){s[m]=t?t[f]:f}):s=e||{},u.attribLocations=s}return u}const Hi=["VERTEX_SHADER","FRAGMENT_SHADER"];function Xi(e,t){if(t.indexOf("frag")>=0)return Hc;if(t.indexOf("vert")>=0)return Xc}function Yi(e,t,n){const r=e.getAttachedShaders(t);for(const o of r)n.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const Wi=(e=0)=>new Promise(t=>setTimeout(t,e));function Ki(e,t,n){const r=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:c,transformFeedbackMode:i}=St(n);for(let a=0;a<t.length;++a){let u=t[a];if(typeof u=="string"){const s=_n(u),m=s?s.text:u;let f=e[Hi[a]];s&&s.type&&(f=Xi(e,s.type)||f),u=e.createShader(f),e.shaderSource(u,$n(m).shaderSource),e.compileShader(u),e.attachShader(r,u)}}Object.entries(o).forEach(([a,u])=>e.bindAttribLocation(r,u,a));{let a=c;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(r,a,i||Yc))}return e.linkProgram(r),r}function gi(e,t,n,r,o){const c=St(n,r,o),i=new Set(t),a=Ki(e,t,c);function u(s,m){const f=qi(s,m,c.errorCallback);return f&&Yi(s,m,i),f}if(c.callback){ji(e,a).then(()=>{const s=u(e,a);c.callback(s,s?void 0:a)});return}return u(e,a)?void 0:a}async function ji(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(c,i)=>c.getProgramParameter(i,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await Wi(o),o=1e3/60;while(!r(e,t))}function qi(e,t,n){if(n=n||bt,!e.getProgramParameter(t,dc)){const o=e.getProgramInfoLog(t);n(`Error in program linking: ${o}`);const i=e.getAttachedShaders(t).map(a=>di(e,e.getShaderParameter(a,e.SHADER_TYPE),a,n));return`${o}
${i.filter(a=>a).join(`
`)}`}}function Zi(e,t,n,r,o){return gi(e,t,n,r,o)}function kn(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const Ji=/(\.|\[|]|\w+)/g,Qi=e=>e>="0"&&e<="9";function ea(e,t,n,r){const o=e.split(Ji).filter(a=>a!=="");let c=0,i="";for(;;){const a=o[c++];i+=a;const u=Qi(a[0]),s=u?parseInt(a):a;if(u&&(i+=o[c++]),c===o.length){n[s]=t;break}else{const f=o[c++],l=f==="[",E=n[s]||(l?[]:{});n[s]=E,n=E,r[i]=r[i]||function(x){return function(y){dn(x,y)}}(E),i+=f}}}function ta(e,t){let n=0;function r(a,u,s){const m=u.name.endsWith("[0]"),f=u.type,l=b[f];if(!l)throw new Error(`unknown type: 0x${f.toString(16)}`);let E;if(l.bindPoint){const x=n;n+=u.size,m?E=l.arraySetter(e,f,x,s,u.size):E=l.setter(e,f,x,s,u.size)}else l.arraySetter&&m?E=l.arraySetter(e,s):E=l.setter(e,s);return E.location=s,E}const o={},c={},i=e.getProgramParameter(t,Tn);for(let a=0;a<i;++a){const u=e.getActiveUniform(t,a);if(kn(u))continue;let s=u.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const m=e.getUniformLocation(t,u.name);if(m){const f=r(t,u,m);o[s]=f,ea(s,f,c,o)}}return o}function na(e,t){const n={},r=e.getProgramParameter(t,Kc);for(let o=0;o<r;++o){const c=e.getTransformFeedbackVarying(t,o);n[c.name]={index:o,type:c.type,size:c.size}}return n}function ra(e,t){const n=e.getProgramParameter(t,Tn),r=[],o=[];for(let a=0;a<n;++a){o.push(a),r.push({});const u=e.getActiveUniform(t,a);r[a].name=u.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const u=a[0],s=a[1];e.getActiveUniforms(t,o,e[u]).forEach(function(m,f){r[f][s]=m})});const c={},i=e.getProgramParameter(t,gc);for(let a=0;a<i;++a){const u=e.getActiveUniformBlockName(t,a),s={index:e.getUniformBlockIndex(t,u),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,jc),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,qc),size:e.getActiveUniformBlockParameter(t,a,Zc),uniformIndices:e.getActiveUniformBlockParameter(t,a,Jc)};s.used=s.usedByVertexShader||s.usedByFragmentShader,c[u]=s}return{blockSpecs:c,uniformData:r}}function dn(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):dn(e[n],t[n])}}function Hn(e,...t){const n=e.uniformSetters||e,r=t.length;for(let o=0;o<r;++o){const c=t[o];if(Array.isArray(c)){const i=c.length;for(let a=0;a<i;++a)Hn(n,c[a])}else for(const i in c){const a=n[i];a&&a(c[i])}}}function oa(e,t){const n={},r=e.getProgramParameter(t,Wc);for(let o=0;o<r;++o){const c=e.getActiveAttrib(t,o);if(kn(c))continue;const i=e.getAttribLocation(t,c.name),a=w[c.type],u=a.setter(e,i,a);u.location=i,n[c.name]=u}return n}function ca(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function vt(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(ca(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer($c,n.indices))}function Vt(e,t){const n=ta(e,t),r=oa(e,t),o={program:t,uniformSetters:n,attribSetters:r};return he(e)&&(o.uniformBlockSpec=ra(e,t),o.transformFeedbackInfo=na(e,t)),o}const ia=/\s|{|}|;/;function Xn(e,t,n,r,o){const c=St(n,r,o),i=[];if(t=t.map(function(s){if(!ia.test(s)){const m=_n(s);if(m)s=m.text;else{const f=`no element with id: ${s}`;c.errorCallback(f),i.push(f)}}return s}),i.length)return ki(c,"");const a=c.callback;a&&(c.callback=(s,m)=>{a(s,s?void 0:Vt(e,m))});const u=Zi(e,t,c);return u?Vt(e,u):null}const aa=4,$t=5123;function Yn(e,t,n,r,o,c){n=n===void 0?aa:n;const i=t.indices,a=t.elementType,u=r===void 0?t.numElements:r;o=o===void 0?0:o,a||i?c!==void 0?e.drawElementsInstanced(n,u,a===void 0?$t:t.elementType,o,c):e.drawElements(n,u,a===void 0?$t:t.elementType,o):c!==void 0?e.drawArraysInstanced(n,o,u,c):e.drawArrays(n,o,u)}function Wn(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(o){vt(e,o,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function Kn(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return e.width!==n||e.height!==r?(e.width=n,e.height=r,!0):!1}const ua=`#version 300 es

in vec3 a_position;
in vec3 a_color;

out vec3 v_color;

void main() {
    v_color = a_color;
    gl_Position = vec4(a_position, 1.0f);
}`,sa=`#version 300 es

precision mediump float;

in vec3 v_color;

out vec4 frag_color;

void main() {
    frag_color = vec4(v_color, 1.0f);
}`;function fa(e){const t={a_position:{numComponents:3,data:[0,.5,0,-.5,-.5,0,.5,-.5,0]},a_color:{numComponents:3,data:[1,0,0,0,1,0,0,0,1]},indices:{numComponents:3,data:[0,1,2]}},n=Xn(e,[ua,sa],["a_position","a_color"]),r=Wn(e,n,rn(e,t));return o=>{Kn(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(n.program),vt(e,n,r),Yn(e,r)}}const la=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 position;
in vec3 normal;
in vec2 texcoord;

out vec4 v_position;
out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = texcoord;
  v_position = u_worldViewProjection * position;
  v_normal = (u_worldInverseTranspose * vec4(normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * position)).xyz;
  gl_Position = v_position;
}
`,ma=`#version 300 es

precision mediump float;

in vec4 v_position;
in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,X=Rr;function xa(e){const t={position:[1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1],normal:[1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1],texcoord:[1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]},n=Xn(e,[la,ma],["position","normal","texcoord"]),r=Wn(e,n,rn(e,t)),o=Vc(e,{min:e.NEAREST,mag:e.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),c={u_lightWorldPos:[1,8,-10],u_lightColor:[1,.8,.8,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1,u_diffuse:o,u_viewInverse:X.identity(),u_world:X.identity(),u_worldInverseTranspose:X.identity(),u_worldViewProjection:X.identity()};return i=>{Kn(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),i*=.001;const a=30*Math.PI/180,u=e.canvas.clientWidth/e.canvas.clientHeight,f=X.perspective(a,u,.5,10),l=[1,4,-6],E=[0,0,0],x=[0,1,0],y=X.lookAt(l,E,x),_=X.inverse(y),T=X.multiply(f,_),A=X.rotationY(i);Object.assign(c,{u_viewInverse:y,u_world:A,u_worldInverseTranspose:X.transpose(X.inverse(A)),u_worldViewProjection:X.multiply(T,A)}),e.useProgram(n.program),vt(e,n,r),Hn(n,c),Yn(e,r)}}const It={"hello-triangle":fa,"twgl-cube":xa};document.querySelector("#app").innerHTML=`
  <select id="example" style="position: absolute">
    ${Object.keys(It).map(e=>`<option value="${e}">${e}</option>`).join(`
`)}
  </select>
  <div id="container"></div>
`;const _e=document.querySelector("#example"),ya=new URLSearchParams(location.search),kt=ya.get("example");kt!==null&&(_e.value=kt);_e.addEventListener("change",()=>{const e=new URL(location.href);e.searchParams.set("example",_e.value),history.replaceState({},"",e),dt(It[_e.value],document.querySelector("#container"))});dt(It[_e.value],document.querySelector("#container"));
