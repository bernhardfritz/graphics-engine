(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function Fr(e,t){const n=document.createElement("canvas");t.innerHTML="",t.appendChild(n);const r=n.getContext("webgl2");if(r===null)throw new Error("Error creating WebGL2 context.");const o=e(r),c=i=>{o(i),requestAnimationFrame(c)};requestAnimationFrame(c)}/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let V=Float32Array;function _c(e){const t=V;return V=e,t}function J(e,t,n){const r=new V(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function Sr(e,t,n){return n=n||new V(3),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function wr(e,t,n){return n=n||new V(3),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function yc(e,t,n,r){return r=r||new V(3),r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r[2]=e[2]+n*(t[2]-e[2]),r}function Ec(e,t,n,r){return r=r||new V(3),r[0]=e[0]+n[0]*(t[0]-e[0]),r[1]=e[1]+n[1]*(t[1]-e[1]),r[2]=e[2]+n[2]*(t[2]-e[2]),r}function Tc(e,t,n){return n=n||new V(3),n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n}function pc(e,t,n){return n=n||new V(3),n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n}function Ac(e,t,n){return n=n||new V(3),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function hc(e,t,n){return n=n||new V(3),n[0]=e[0]/t,n[1]=e[1]/t,n[2]=e[2]/t,n}function Ut(e,t,n){n=n||new V(3);const r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=r,n[2]=o,n}function bc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Sc(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function wc(e,t){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function Ic(e,t){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function nt(e,t){t=t||new V(3);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=Math.sqrt(n);return r>1e-5?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=0,t[1]=0,t[2]=0),t}function vc(e,t){return t=t||new V(3),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Pc(e,t){return t=t||new V(3),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ir(e,t,n){return n=n||new V(3),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function Rc(e,t,n){return n=n||new V(3),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}var vr=Object.freeze({__proto__:null,add:Sr,copy:Pc,create:J,cross:Ut,distance:wc,distanceSq:Ic,divide:Rc,divScalar:hc,dot:bc,lerp:yc,lerpV:Ec,length:Fc,lengthSq:Sc,max:Tc,min:pc,mulScalar:Ac,multiply:Ir,negate:vc,normalize:nt,setDefaultType:_c,subtract:wr});let N=Float32Array;function Cc(e){const t=N;return N=e,t}function Bc(e,t){return t=t||new N(16),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t}function Nc(){return new N(16).fill(0)}function Pr(e,t){return t=t||new N(16),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Xt(e){return e=e||new N(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dc(e,t){if(t=t||new N(16),t===e){let p;return p=e[1],e[1]=e[4],e[4]=p,p=e[2],e[2]=e[8],e[8]=p,p=e[3],e[3]=e[12],e[12]=p,p=e[6],e[6]=e[9],e[9]=p,p=e[7],e[7]=e[13],e[13]=p,p=e[11],e[11]=e[14],e[14]=p,t}const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],s=e[1*4+2],u=e[1*4+3],l=e[2*4+0],m=e[2*4+1],f=e[2*4+2],y=e[2*4+3],x=e[3*4+0],_=e[3*4+1],E=e[3*4+2],T=e[3*4+3];return t[0]=n,t[1]=i,t[2]=l,t[3]=x,t[4]=r,t[5]=a,t[6]=m,t[7]=_,t[8]=o,t[9]=s,t[10]=f,t[11]=E,t[12]=c,t[13]=u,t[14]=y,t[15]=T,t}function Wt(e,t){t=t||new N(16);const n=e[0*4+0],r=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],s=e[1*4+2],u=e[1*4+3],l=e[2*4+0],m=e[2*4+1],f=e[2*4+2],y=e[2*4+3],x=e[3*4+0],_=e[3*4+1],E=e[3*4+2],T=e[3*4+3],p=f*T,A=E*y,b=s*T,h=E*u,F=s*y,w=f*u,R=o*T,C=E*c,d=o*y,D=f*c,z=o*u,L=s*c,O=l*_,k=x*m,j=i*_,H=x*a,X=i*m,Se=l*a,We=n*_,Ye=x*r,qe=n*m,Ke=l*r,Ze=n*a,Qe=i*r,tr=p*a+h*m+F*_-(A*a+b*m+w*_),nr=A*r+R*m+D*_-(p*r+C*m+d*_),rr=b*r+C*a+z*_-(h*r+R*a+L*_),or=w*r+d*a+L*m-(F*r+D*a+z*m),g=1/(n*tr+i*nr+l*rr+x*or);return t[0]=g*tr,t[1]=g*nr,t[2]=g*rr,t[3]=g*or,t[4]=g*(A*i+b*l+w*x-(p*i+h*l+F*x)),t[5]=g*(p*n+C*l+d*x-(A*n+R*l+D*x)),t[6]=g*(h*n+R*i+L*x-(b*n+C*i+z*x)),t[7]=g*(F*n+D*i+z*l-(w*n+d*i+L*l)),t[8]=g*(O*u+H*y+X*T-(k*u+j*y+Se*T)),t[9]=g*(k*c+We*y+Ke*T-(O*c+Ye*y+qe*T)),t[10]=g*(j*c+Ye*u+Ze*T-(H*c+We*u+Qe*T)),t[11]=g*(Se*c+qe*u+Qe*y-(X*c+Ke*u+Ze*y)),t[12]=g*(j*f+Se*E+k*s-(X*E+O*s+H*f)),t[13]=g*(qe*E+O*o+Ye*f-(We*f+Ke*E+k*o)),t[14]=g*(We*s+Qe*E+H*o-(Ze*E+j*o+Ye*s)),t[15]=g*(Ze*f+X*o+Ke*s-(qe*s+Qe*f+Se*o)),t}function Uc(e,t,n){n=n||new N(16);const r=e[0],o=e[1],c=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],m=e[8],f=e[9],y=e[10],x=e[11],_=e[12],E=e[13],T=e[14],p=e[15],A=t[0],b=t[1],h=t[2],F=t[3],w=t[4],R=t[5],C=t[6],d=t[7],D=t[8],z=t[9],L=t[10],O=t[11],k=t[12],j=t[13],H=t[14],X=t[15];return n[0]=r*A+a*b+m*h+_*F,n[1]=o*A+s*b+f*h+E*F,n[2]=c*A+u*b+y*h+T*F,n[3]=i*A+l*b+x*h+p*F,n[4]=r*w+a*R+m*C+_*d,n[5]=o*w+s*R+f*C+E*d,n[6]=c*w+u*R+y*C+T*d,n[7]=i*w+l*R+x*C+p*d,n[8]=r*D+a*z+m*L+_*O,n[9]=o*D+s*z+f*L+E*O,n[10]=c*D+u*z+y*L+T*O,n[11]=i*D+l*z+x*L+p*O,n[12]=r*k+a*j+m*H+_*X,n[13]=o*k+s*j+f*H+E*X,n[14]=c*k+u*j+y*H+T*X,n[15]=i*k+l*j+x*H+p*X,n}function Dc(e,t,n){return n=n||Xt(),e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11]),n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function Mc(e,t){return t=t||J(),t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Lc(e,t,n){n=n||J();const r=t*4;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n}function zc(e,t,n,r){r!==e&&(r=Pr(e,r));const o=n*4;return r[o+0]=t[0],r[o+1]=t[1],r[o+2]=t[2],r}function Vc(e,t,n,r,o){o=o||new N(16);const c=Math.tan(Math.PI*.5-.5*e),i=1/(n-r);return o[0]=c/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*r*i*2,o[15]=0,o}function Oc(e,t,n,r,o,c,i){return i=i||new N(16),i[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(r-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-c),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(r+n)/(n-r),i[14]=(c+o)/(o-c),i[15]=1,i}function gc(e,t,n,r,o,c,i){i=i||new N(16);const a=t-e,s=r-n,u=o-c;return i[0]=2*o/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/s,i[6]=0,i[7]=0,i[8]=(e+t)/a,i[9]=(r+n)/s,i[10]=c/u,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*c/u,i[15]=0,i}let ie,_e,re;function Gc(e,t,n,r){return r=r||new N(16),ie=ie||J(),_e=_e||J(),re=re||J(),nt(wr(e,t,re),re),nt(Ut(n,re,ie),ie),nt(Ut(re,ie,_e),_e),r[0]=ie[0],r[1]=ie[1],r[2]=ie[2],r[3]=0,r[4]=_e[0],r[5]=_e[1],r[6]=_e[2],r[7]=0,r[8]=re[0],r[9]=re[1],r[10]=re[2],r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function $c(e,t){return t=t||new N(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function kc(e,t,n){n=n||new N(16);const r=t[0],o=t[1],c=t[2],i=e[0],a=e[1],s=e[2],u=e[3],l=e[1*4+0],m=e[1*4+1],f=e[1*4+2],y=e[1*4+3],x=e[2*4+0],_=e[2*4+1],E=e[2*4+2],T=e[2*4+3],p=e[3*4+0],A=e[3*4+1],b=e[3*4+2],h=e[3*4+3];return e!==n&&(n[0]=i,n[1]=a,n[2]=s,n[3]=u,n[4]=l,n[5]=m,n[6]=f,n[7]=y,n[8]=x,n[9]=_,n[10]=E,n[11]=T),n[12]=i*r+l*o+x*c+p,n[13]=a*r+m*o+_*c+A,n[14]=s*r+f*o+E*c+b,n[15]=u*r+y*o+T*c+h,n}function jc(e,t){t=t||new N(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hc(e,t,n){n=n||new N(16);const r=e[4],o=e[5],c=e[6],i=e[7],a=e[8],s=e[9],u=e[10],l=e[11],m=Math.cos(t),f=Math.sin(t);return n[4]=m*r+f*a,n[5]=m*o+f*s,n[6]=m*c+f*u,n[7]=m*i+f*l,n[8]=m*a-f*r,n[9]=m*s-f*o,n[10]=m*u-f*c,n[11]=m*l-f*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Xc(e,t){t=t||new N(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Wc(e,t,n){n=n||new N(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[2*4+0],s=e[2*4+1],u=e[2*4+2],l=e[2*4+3],m=Math.cos(t),f=Math.sin(t);return n[0]=m*r-f*a,n[1]=m*o-f*s,n[2]=m*c-f*u,n[3]=m*i-f*l,n[8]=m*a+f*r,n[9]=m*s+f*o,n[10]=m*u+f*c,n[11]=m*l+f*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Yc(e,t){t=t||new N(16);const n=Math.cos(e),r=Math.sin(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qc(e,t,n){n=n||new N(16);const r=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],a=e[1*4+0],s=e[1*4+1],u=e[1*4+2],l=e[1*4+3],m=Math.cos(t),f=Math.sin(t);return n[0]=m*r+f*a,n[1]=m*o+f*s,n[2]=m*c+f*u,n[3]=m*i+f*l,n[4]=m*a-f*r,n[5]=m*s-f*o,n[6]=m*u-f*c,n[7]=m*l-f*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Kc(e,t,n){n=n||new N(16);let r=e[0],o=e[1],c=e[2];const i=Math.sqrt(r*r+o*o+c*c);r/=i,o/=i,c/=i;const a=r*r,s=o*o,u=c*c,l=Math.cos(t),m=Math.sin(t),f=1-l;return n[0]=a+(1-a)*l,n[1]=r*o*f+c*m,n[2]=r*c*f-o*m,n[3]=0,n[4]=r*o*f-c*m,n[5]=s+(1-s)*l,n[6]=o*c*f+r*m,n[7]=0,n[8]=r*c*f+o*m,n[9]=o*c*f-r*m,n[10]=u+(1-u)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Zc(e,t,n,r){r=r||new N(16);let o=t[0],c=t[1],i=t[2];const a=Math.sqrt(o*o+c*c+i*i);o/=a,c/=a,i/=a;const s=o*o,u=c*c,l=i*i,m=Math.cos(n),f=Math.sin(n),y=1-m,x=s+(1-s)*m,_=o*c*y+i*f,E=o*i*y-c*f,T=o*c*y-i*f,p=u+(1-u)*m,A=c*i*y+o*f,b=o*i*y+c*f,h=c*i*y-o*f,F=l+(1-l)*m,w=e[0],R=e[1],C=e[2],d=e[3],D=e[4],z=e[5],L=e[6],O=e[7],k=e[8],j=e[9],H=e[10],X=e[11];return r[0]=x*w+_*D+E*k,r[1]=x*R+_*z+E*j,r[2]=x*C+_*L+E*H,r[3]=x*d+_*O+E*X,r[4]=T*w+p*D+A*k,r[5]=T*R+p*z+A*j,r[6]=T*C+p*L+A*H,r[7]=T*d+p*O+A*X,r[8]=b*w+h*D+F*k,r[9]=b*R+h*z+F*j,r[10]=b*C+h*L+F*H,r[11]=b*d+h*O+F*X,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r}function Qc(e,t){return t=t||new N(16),t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Jc(e,t,n){n=n||new N(16);const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0],n[1]=r*e[0*4+1],n[2]=r*e[0*4+2],n[3]=r*e[0*4+3],n[4]=o*e[1*4+0],n[5]=o*e[1*4+1],n[6]=o*e[1*4+2],n[7]=o*e[1*4+3],n[8]=c*e[2*4+0],n[9]=c*e[2*4+1],n[10]=c*e[2*4+2],n[11]=c*e[2*4+3],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Rr(e,t,n){n=n||J();const r=t[0],o=t[1],c=t[2],i=r*e[0*4+3]+o*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function Cr(e,t,n){n=n||J();const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0],n[1]=r*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1],n[2]=r*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2],n}function ei(e,t,n){n=n||J();const r=Wt(e),o=t[0],c=t[1],i=t[2];return n[0]=o*r[0*4+0]+c*r[0*4+1]+i*r[0*4+2],n[1]=o*r[1*4+0]+c*r[1*4+1]+i*r[1*4+2],n[2]=o*r[2*4+0]+c*r[2*4+1]+i*r[2*4+2],n}var Br=Object.freeze({__proto__:null,axisRotate:Zc,axisRotation:Kc,copy:Pr,create:Nc,frustum:gc,getAxis:Lc,getTranslation:Mc,identity:Xt,inverse:Wt,lookAt:Gc,multiply:Uc,negate:Bc,ortho:Oc,perspective:Vc,rotateX:Hc,rotateY:Wc,rotateZ:qc,rotationX:jc,rotationY:Xc,rotationZ:Yc,scale:Jc,scaling:Qc,setAxis:zc,setDefaultType:Cc,setTranslation:Dc,transformDirection:Cr,transformNormal:ei,transformPoint:Rr,translate:kc,translation:$c,transpose:dc});const Yt=5120,ze=5121,qt=5122,Kt=5123,Zt=5124,Qt=5125,Jt=5126,ti=32819,ni=32820,ri=33635,oi=5131,ci=33640,ii=35899,ai=35902,si=36269,ui=34042,Nr={};{const e=Nr;e[Yt]=Int8Array,e[ze]=Uint8Array,e[qt]=Int16Array,e[Kt]=Uint16Array,e[Zt]=Int32Array,e[Qt]=Uint32Array,e[Jt]=Float32Array,e[ti]=Uint16Array,e[ni]=Uint16Array,e[ri]=Uint16Array,e[oi]=Uint16Array,e[ci]=Uint32Array,e[ii]=Uint32Array,e[ai]=Uint32Array,e[si]=Uint32Array,e[ui]=Uint32Array}function Be(e){if(e instanceof Int8Array)return Yt;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return ze;if(e instanceof Int16Array)return qt;if(e instanceof Uint16Array)return Kt;if(e instanceof Int32Array)return Zt;if(e instanceof Uint32Array)return Qt;if(e instanceof Float32Array)return Jt;throw new Error("unsupported typed array type")}function at(e){if(e===Int8Array)return Yt;if(e===Uint8Array||e===Uint8ClampedArray)return ze;if(e===Int16Array)return qt;if(e===Uint16Array)return Kt;if(e===Int32Array)return Zt;if(e===Uint32Array)return Qt;if(e===Float32Array)return Jt;throw new Error("unsupported typed array type")}function st(e){const t=Nr[e];if(!t)throw new Error("unknown gl type");return t}const be=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};var fi=Object.freeze({__proto__:null,getGLTypeForTypedArray:Be,getGLTypeForTypedArrayType:at,getTypedArrayTypeForGLType:st,isArrayBuffer:be});function li(e,t,n){e.forEach(function(r){const o=t[r];o!==void 0&&(n[r]=o)})}function en(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n])})}function dr(...e){console.error(...e)}function Ur(...e){console.warn(...e)}const cr=new Map;function ut(e,t){if(!e||typeof e!="object")return!1;let n=cr.get(t);n||(n=new WeakMap,cr.set(t,n));let r=n.get(e);if(r===void 0){const o=Object.prototype.toString.call(e);r=o.substring(8,o.length-1)===t,n.set(e,r)}return r}function mi(e,t){return typeof WebGLBuffer<"u"&&ut(t,"WebGLBuffer")}function Dr(e,t){return typeof WebGLRenderbuffer<"u"&&ut(t,"WebGLRenderbuffer")}function ft(e,t){return typeof WebGLTexture<"u"&&ut(t,"WebGLTexture")}function xi(e,t){return typeof WebGLSampler<"u"&&ut(t,"WebGLSampler")}const Mr=35044,Z=34962,Lr=34963,_i=34660,yi=5120,Ei=5121,Ti=5122,pi=5123,Ai=5124,hi=5125,zr=5126,lt={attribPrefix:""};function Vr(e){lt.attribPrefix=e}function tn(e){en(e,lt)}function Or(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||Mr)}function Ge(e,t,n,r){if(mi(e,t))return t;n=n||Z;const o=e.createBuffer();return Or(e,n,o,t,r),o}function gr(e){return e==="indices"}function bi(e){return e===Int8Array||e===Uint8Array}function $e(e){return e.length?e:e.data}const Fi=/coord|texture/i,Si=/color|colour/i;function wi(e,t){let n;if(Fi.test(e)?n=2:Si.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function ke(e,t,n){return e.numComponents||e.size||wi(t,n||$e(e).length)}function je(e,t){if(be(e))return e;if(be(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?nn(e.type):void 0;return n||(gr(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Ii(e){return typeof e=="number"?e:e?at(e):zr}function nn(e){return typeof e=="number"?st(e):e||Float32Array}function vi(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Ii(t.type),arrayType:nn(t.type)}}function Pi(e,t){const n=t.data||t,r=nn(t.type),o=n*r.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(Z,c),e.bufferData(Z,o,t.drawType||Mr),{buffer:c,numValues:n,type:at(r),arrayType:r}}function Ri(e,t,n){const r=je(t,n);return{arrayType:r.constructor,buffer:Ge(e,r,void 0,t.drawType),type:Be(r),numValues:0}}function rn(e,t){const n={};return Object.keys(t).forEach(function(r){if(!gr(r)){const o=t[r],c=o.attrib||o.name||o.attribName||lt.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!be(o.value))throw new Error("array.value is not array or typedarray");n[c]={value:o.value}}else{let i;o.buffer&&o.buffer instanceof WebGLBuffer?i=vi:typeof o=="number"||typeof o.data=="number"?i=Pi:i=Ri;const{buffer:a,type:s,numValues:u,arrayType:l}=i(e,o,r),m=o.normalize!==void 0?o.normalize:bi(l),f=ke(o,r,u);n[c]={buffer:a,numComponents:f,type:s,normalize:m,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(Z,null),n}function Gr(e,t,n,r){n=je(n),r!==void 0?(e.bindBuffer(Z,t.buffer),e.bufferSubData(Z,r,n)):Or(e,Z,t.buffer,n,t.drawType)}function Ci(e,t){return t===yi||t===Ei?1:t===Ti||t===pi?2:t===Ai||t===hi||t===zr?4:0}const ve=["position","positions","a_position"];function Bi(e){let t,n;for(n=0;n<ve.length&&(t=ve[n],!(t in e));++n);n===ve.length&&(t=Object.keys(e)[0]);const r=e[t],o=$e(r).length;if(o===void 0)return 1;const c=ke(r,t),i=o/c;if(o%c>0)throw new Error(`numComponents ${c} not correct for length ${o}`);return i}function Ni(e,t){let n,r;for(r=0;r<ve.length&&(n=ve[r],!(n in t||(n=lt.attribPrefix+n,n in t)));++r);r===ve.length&&(n=Object.keys(t)[0]);const o=t[n];if(!o.buffer)return 1;e.bindBuffer(Z,o.buffer);const c=e.getBufferParameter(Z,_i);e.bindBuffer(Z,null);const i=Ci(e,o.type),a=c/i,s=o.numComponents||o.size,u=a/s;if(u%1!==0)throw new Error(`numComponents ${s} not correct for length ${length}`);return u}function on(e,t,n){const r=rn(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const c=t.indices;if(c){const i=je(c,"indices");o.indices=Ge(e,i,Lr),o.numElements=i.length,o.elementType=Be(i)}else o.numElements||(o.numElements=Ni(e,o.attribs));return o}function cn(e,t,n){const r=n==="indices"?Lr:Z,o=je(t,n);return Ge(e,o,r)}function an(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=cn(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=Be(je(t.indices))):n.numElements=Bi(t),n}var di=Object.freeze({__proto__:null,createAttribsFromArrays:rn,createBuffersFromArrays:an,createBufferFromArray:cn,createBufferFromTypedArray:Ge,createBufferInfoFromArrays:on,setAttribInfoBufferFromArray:Gr,setAttributePrefix:Vr,setAttributeDefaults_:tn,getNumComponents_:ke,getArray_:$e});const Ae=$e,Ui=ke;function $r(e,t){let n=0;return e.push=function(){for(let r=0;r<arguments.length;++r){const o=arguments[r];if(o instanceof Array||be(o))for(let c=0;c<o.length;++c)e[n++]=o[c];else e[n++]=o}},e.reset=function(r){n=r||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function v(e,t,n){const r=n||Float32Array;return $r(new r(e*t),e)}function Di(e){return e!=="indices"}function Mi(e){const t=e.indices,n={},r=t.length;function o(c){const i=e[c],a=i.numComponents,s=v(a,r,i.constructor);for(let u=0;u<r;++u){const m=t[u]*a;for(let f=0;f<a;++f)s.push(i[m+f])}n[c]=s}return Object.keys(e).filter(Di).forEach(o),n}function Li(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let r=0;r<n;r+=9){const o=t[r+0],c=t[r+1],i=t[r+2],a=t[r+3],s=t[r+4],u=t[r+5],l=t[r+6],m=t[r+7],f=t[r+8];let y=o+a+l,x=c+s+m,_=i+u+f;const E=Math.sqrt(y*y+x*x+_*_);y/=E,x/=E,_/=E,t[r+0]=y,t[r+1]=x,t[r+2]=_,t[r+3]=y,t[r+4]=x,t[r+5]=_,t[r+6]=y,t[r+7]=x,t[r+8]=_}return e}function sn(e,t,n){const r=e.length,o=new Float32Array(3);for(let c=0;c<r;c+=3)n(t,[e[c],e[c+1],e[c+2]],o),e[c]=o[0],e[c+1]=o[1],e[c+2]=o[2]}function zi(e,t,n){n=n||J();const r=t[0],o=t[1],c=t[2];return n[0]=r*e[0*4+0]+o*e[0*4+1]+c*e[0*4+2],n[1]=r*e[1*4+0]+o*e[1*4+1]+c*e[1*4+2],n[2]=r*e[2*4+0]+o*e[2*4+1]+c*e[2*4+2],n}function kr(e,t){return sn(e,t,Cr),e}function jr(e,t){return sn(e,Wt(t),zi),e}function Hr(e,t){return sn(e,t,Rr),e}function Xr(e,t){return Object.keys(e).forEach(function(n){const r=e[n];n.indexOf("pos")>=0?Hr(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?kr(r,t):n.indexOf("norm")>=0&&jr(r,t)}),e}function un(e,t,n){return e=e||2,t=t||0,n=n||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,n+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function fn(e,t,n,r,o){e=e||1,t=t||1,n=n||1,r=r||1,o=o||Xt();const c=(n+1)*(r+1),i=v(3,c),a=v(3,c),s=v(2,c);for(let f=0;f<=r;f++)for(let y=0;y<=n;y++){const x=y/n,_=f/r;i.push(e*x-e*.5,0,t*_-t*.5),a.push(0,1,0),s.push(x,_)}const u=n+1,l=v(3,n*r*2,Uint16Array);for(let f=0;f<r;f++)for(let y=0;y<n;y++)l.push((f+0)*u+y,(f+1)*u+y,(f+0)*u+y+1),l.push((f+1)*u+y,(f+1)*u+y+1,(f+0)*u+y+1);return Xr({position:i,normal:a,texcoord:s,indices:l},o)}function ln(e,t,n,r,o,c,i){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||Math.PI,c=c||0,i=i||Math.PI*2;const a=o-r,s=i-c,u=(t+1)*(n+1),l=v(3,u),m=v(3,u),f=v(2,u);for(let _=0;_<=n;_++)for(let E=0;E<=t;E++){const T=E/t,p=_/n,A=s*T+c,b=a*p+r,h=Math.sin(A),F=Math.cos(A),w=Math.sin(b),R=Math.cos(b),C=F*w,d=R,D=h*w;l.push(e*C,e*d,e*D),m.push(C,d,D),f.push(1-T,p)}const y=t+1,x=v(3,t*n*2,Uint16Array);for(let _=0;_<t;_++)for(let E=0;E<n;E++)x.push((E+0)*y+_,(E+0)*y+_+1,(E+1)*y+_),x.push((E+1)*y+_,(E+0)*y+_+1,(E+1)*y+_+1);return{position:l,normal:m,texcoord:f,indices:x}}const Vi=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function mn(e){e=e||1;const t=e/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],c=6*4,i=v(3,c),a=v(3,c),s=v(2,c),u=v(3,6*2,Uint16Array);for(let l=0;l<6;++l){const m=Vi[l];for(let y=0;y<4;++y){const x=n[m[y]],_=r[l],E=o[y];i.push(x),a.push(_),s.push(E)}const f=4*l;u.push(f+0,f+1,f+2),u.push(f+0,f+2,f+3)}return{position:i,normal:a,texcoord:s,indices:u}}function mt(e,t,n,r,o,c,i){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const a=c===void 0?!0:c,s=i===void 0?!0:i,u=(a?2:0)+(s?2:0),l=(r+1)*(o+1+u),m=v(3,l),f=v(3,l),y=v(2,l),x=v(3,r*(o+u/2)*2,Uint16Array),_=r+1,E=Math.atan2(e-t,n),T=Math.cos(E),p=Math.sin(E),A=a?-2:0,b=o+(s?2:0);for(let h=A;h<=b;++h){let F=h/o,w=n*F,R;h<0?(w=0,F=1,R=e):h>o?(w=n,F=1,R=t):R=e+(t-e)*(h/o),(h===-2||h===o+2)&&(R=0,F=0),w-=n/2;for(let C=0;C<_;++C){const d=Math.sin(C*Math.PI*2/r),D=Math.cos(C*Math.PI*2/r);m.push(d*R,w,D*R),h<0?f.push(0,-1,0):h>o?f.push(0,1,0):R===0?f.push(0,0,0):f.push(d*T,p,D*T),y.push(C/r,1-F)}}for(let h=0;h<o+u;++h)if(!(h===1&&a||h===o+u-2&&s))for(let F=0;F<r;++F)x.push(_*(h+0)+0+F,_*(h+0)+1+F,_*(h+1)+1+F),x.push(_*(h+0)+0+F,_*(h+1)+1+F,_*(h+1)+0+F);return{position:m,normal:f,texcoord:y,indices:x}}function ir(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const o=e[r],c=e.slice(r+1,r+4);c.push.apply(c,t);for(let i=0;i<o;++i)n.push.apply(n,c)}return n}function xn(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],n=ir([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=ir([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),o=e.length/3,c={position:v(3,o),texcoord:v(2,o),normal:v(3,o),color:v(4,o,Uint8Array),indices:v(3,o/3,Uint16Array)};c.position.push(e),c.texcoord.push(t),c.normal.push(n),c.color.push(r);for(let i=0;i<o;++i)c.indices.push(i);return c}function xt(e,t,n,r,o,c,i){if(o<=0)throw new Error("subdivisionDown must be > 0");c=c||0,i=i||1;const a=2,s=i-c,u=(o+1)*2*(2+a),l=v(3,u),m=v(3,u),f=v(2,u);function y(p,A,b){return p+(A-p)*b}function x(p,A,b,h,F,w){for(let R=0;R<=o;R++){const C=A/(a-1),d=R/o,D=(C-.5)*2,z=(c+d*s)*Math.PI,L=Math.sin(z),O=Math.cos(z),k=y(e,p,L),j=D*r,H=O*e,X=L*k;l.push(j,H,X);const Se=Sr(Ir([0,L,O],b),h);m.push(Se),f.push(C*F+w,d)}}for(let p=0;p<a;p++){const A=(p/(a-1)-.5)*2;x(t,p,[1,1,1],[0,0,0],1,0),x(t,p,[0,0,0],[A,0,0],0,0),x(n,p,[1,1,1],[0,0,0],1,0),x(n,p,[0,0,0],[A,0,0],0,1)}const _=v(3,o*2*(2+a),Uint16Array);function E(p,A){for(let b=0;b<o;++b)_.push(p+b+0,p+b+1,A+b+0),_.push(p+b+1,A+b+1,A+b+0)}const T=o+1;return E(T*0,T*4),E(T*5,T*7),E(T*6,T*2),E(T*3,T*1),{position:l,normal:m,texcoord:f,indices:_}}function _n(e,t,n,r,o,c){return mt(e,e,t,n,r,o,c)}function yn(e,t,n,r,o,c){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0,c=c||Math.PI*2;const i=c-o,a=n+1,s=r+1,u=a*s,l=v(3,u),m=v(3,u),f=v(2,u),y=v(3,n*r*2,Uint16Array);for(let x=0;x<s;++x){const _=x/r,E=_*Math.PI*2,T=Math.sin(E),p=e+T*t,A=Math.cos(E),b=A*t;for(let h=0;h<a;++h){const F=h/n,w=o+F*i,R=Math.sin(w),C=Math.cos(w),d=R*p,D=C*p,z=R*T,L=C*T;l.push(d,b,D),m.push(z,A,L),f.push(F,1-_)}}for(let x=0;x<r;++x)for(let _=0;_<n;++_){const E=1+_,T=1+x;y.push(a*x+_,a*T+_,a*x+E),y.push(a*T+_,a*T+E,a*x+E)}return{position:l,normal:m,texcoord:f,indices:y}}function En(e,t,n,r,o){if(t<3)throw new Error("divisions must be at least 3");n=n||1,o=o||1,r=r||0;const c=(t+1)*(n+1),i=v(3,c),a=v(3,c),s=v(2,c),u=v(3,n*t*2,Uint16Array);let l=0;const m=e-r,f=t+1;for(let y=0;y<=n;++y){const x=r+m*Math.pow(y/n,o);for(let _=0;_<=t;++_){const E=2*Math.PI*_/t,T=x*Math.cos(E),p=x*Math.sin(E);if(i.push(T,0,p),a.push(0,1,0),s.push(1-_/t,y/n),y>0&&_!==t){const A=l+(_+1),b=l+_,h=l+_-f,F=l+(_+1)-f;u.push(A,b,h),u.push(A,h,F)}}l+=t+1}return{position:i,normal:a,texcoord:s,indices:u}}function Oi(e){return Math.random()*e|0}function gi(e,t){t=t||{};const n=e.position.numElements,r=v(4,n,Uint8Array),o=t.rand||function(c,i){return i<3?Oi(256):255};if(e.color=r,e.indices)for(let c=0;c<n;++c)r.push(o(c,0),o(c,1),o(c,2),o(c,3));else{const c=t.vertsPerColor||3,i=n/c;for(let a=0;a<i;++a){const s=[o(a,0),o(a,1),o(a,2),o(a,3)];for(let u=0;u<c;++u)r.push(s)}}return e}function ee(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return an(t,n)}}function te(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return on(t,n)}}const Gi=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Dt(e,t,n,r){r=r||0;const o=e.length;for(let c=0;c<o;++c)t[n+c]=e[c]+r}function Wr(e,t){const n=Ae(e),r=new n.constructor(t);let o=r;return n.numComponents&&n.numElements&&$r(r,n.numComponents),e.data&&(o={data:r},li(Gi,e,o)),o}function $i(e){const t={};let n;for(let a=0;a<e.length;++a){const s=e[a];Object.keys(s).forEach(function(u){t[u]||(t[u]=[]),!n&&u!=="indices"&&(n=u);const l=s[u],m=Ui(l,u),y=Ae(l).length/m;t[u].push(y)})}function r(a){let s=0,u;for(let l=0;l<e.length;++l){const f=e[l][a],y=Ae(f);s+=y.length,(!u||f.data)&&(u=f)}return{length:s,spec:u}}function o(a,s,u){let l=0,m=0;for(let f=0;f<e.length;++f){const x=e[f][a],_=Ae(x);a==="indices"?(Dt(_,u,m,l),l+=s[f]):Dt(_,u,m),m+=_.length}}const c=t[n],i={};return Object.keys(t).forEach(function(a){const s=r(a),u=Wr(s.spec,s.length);o(a,c,Ae(u)),i[a]=u}),i}function ki(e){const t={};return Object.keys(e).forEach(function(n){const r=e[n],o=Ae(r),c=Wr(r,o.length);Dt(o,Ae(c),0),t[n]=c}),t}const ji=te(xn),Hi=ee(xn),Xi=te(mn),Wi=ee(mn),Yi=te(fn),qi=ee(fn),Ki=te(ln),Zi=ee(ln),Qi=te(mt),Ji=ee(mt),ea=te(un),ta=ee(un),Yr=te(xt),qr=ee(xt),na=te(_n),ra=ee(_n),oa=te(yn),ca=ee(yn),ia=te(En),aa=ee(En),sa=Yr,ua=qr,fa=xt;var Kr=Object.freeze({__proto__:null,create3DFBufferInfo:ji,create3DFBuffers:Hi,create3DFVertices:xn,createAugmentedTypedArray:v,createCubeBufferInfo:Xi,createCubeBuffers:Wi,createCubeVertices:mn,createPlaneBufferInfo:Yi,createPlaneBuffers:qi,createPlaneVertices:fn,createSphereBufferInfo:Ki,createSphereBuffers:Zi,createSphereVertices:ln,createTruncatedConeBufferInfo:Qi,createTruncatedConeBuffers:Ji,createTruncatedConeVertices:mt,createXYQuadBufferInfo:ea,createXYQuadBuffers:ta,createXYQuadVertices:un,createCresentBufferInfo:sa,createCresentBuffers:ua,createCresentVertices:fa,createCrescentBufferInfo:Yr,createCrescentBuffers:qr,createCrescentVertices:xt,createCylinderBufferInfo:na,createCylinderBuffers:ra,createCylinderVertices:_n,createTorusBufferInfo:oa,createTorusBuffers:ca,createTorusVertices:yn,createDiscBufferInfo:ia,createDiscBuffers:aa,createDiscVertices:En,deindexVertices:Mi,flattenNormals:Li,makeRandomVertexColors:gi,reorientDirections:kr,reorientNormals:jr,reorientPositions:Hr,reorientVertices:Xr,concatVertices:$i,duplicateVertices:ki});function Fe(e){return!!e.texStorage2D}function Zr(e){return!e.texStorage2D}const Pe=function(){const e={},t={};function n(r){const o=r.constructor.name;if(!e[o]){for(const c in r)if(typeof r[c]=="number"){const i=t[r[c]];t[r[c]]=i?`${i} | ${c}`:c}e[o]=!0}}return function(o,c){return n(o),t[c]||(typeof c=="number"?`0x${c.toString(16)}`:c)}}();var la=Object.freeze({__proto__:null,glEnumToString:Pe,isWebGL1:Zr,isWebGL2:Fe});const ne={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Re=be,Qr=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Mt=6406,q=6407,B=6408,Lt=6409,zt=6410,Ie=6402,Vt=34041,rt=33071,ma=9728,xa=9729,ce=3553,oe=34067,ue=32879,fe=35866,_t=34069,_a=34070,ya=34071,Ea=34072,Ta=34073,pa=34074,Ot=10241,gt=10240,ot=10242,ct=10243,ar=32882,Aa=33082,ha=33083,ba=33084,Fa=33085,Sa=34892,wa=34893,Tn=3317,Jr=3314,eo=32878,to=3316,no=3315,ro=32877,Ia=37443,va=37441,Pa=37440,Ra=33321,Ca=36756,Ba=33325,Na=33326,da=33330,Ua=33329,Da=33338,Ma=33337,La=33340,za=33339,Va=33323,Oa=36757,ga=33327,Ga=33328,$a=33336,ka=33335,ja=33332,Ha=33331,Xa=33334,Wa=33333,Ya=32849,qa=35905,Ka=36194,Za=36758,Qa=35898,Ja=35901,es=34843,ts=34837,ns=36221,rs=36239,os=36215,cs=36233,is=36209,as=36227,ss=32856,us=35907,fs=36759,ls=32855,ms=32854,xs=32857,_s=34842,ys=34836,Es=36220,Ts=36238,ps=36975,As=36214,hs=36232,bs=36226,Fs=36208,Ss=33189,ws=33190,Is=36012,vs=36013,Ps=35056,ae=5120,U=5121,Je=5122,we=5123,et=5124,ye=5125,G=5126,sr=32819,ur=32820,fr=33635,K=5131,Ue=36193,Nt=33640,Rs=35899,Cs=35902,Bs=36269,Ns=34042,De=33319,Ee=33320,Me=6403,Te=36244,pe=36248,se=36249,oo={};{const e=oo;e[Mt]={numColorComponents:1},e[Lt]={numColorComponents:1},e[zt]={numColorComponents:2},e[q]={numColorComponents:3},e[B]={numColorComponents:4},e[Me]={numColorComponents:1},e[Te]={numColorComponents:1},e[De]={numColorComponents:2},e[Ee]={numColorComponents:2},e[q]={numColorComponents:3},e[pe]={numColorComponents:3},e[B]={numColorComponents:4},e[se]={numColorComponents:4},e[Ie]={numColorComponents:1},e[Vt]={numColorComponents:2}}let dt;function yt(e){if(!dt){const t={};t[Mt]={textureFormat:Mt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[U,K,Ue,G]},t[Lt]={textureFormat:Lt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[U,K,Ue,G]},t[zt]={textureFormat:zt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[U,K,Ue,G]},t[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[U,K,Ue,G,fr]},t[B]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[U,K,Ue,G,sr,ur]},t[Ie]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[ye,we]},t[Ra]={textureFormat:Me,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[U]},t[Ca]={textureFormat:Me,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[ae]},t[Ba]={textureFormat:Me,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[G,K]},t[Na]={textureFormat:Me,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[G]},t[da]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[U]},t[Ua]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[ae]},t[ja]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[we]},t[Ha]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Je]},t[Xa]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ye]},t[Wa]={textureFormat:Te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[et]},t[Va]={textureFormat:De,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[U]},t[Oa]={textureFormat:De,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[ae]},t[ga]={textureFormat:De,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[G,K]},t[Ga]={textureFormat:De,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[G]},t[$a]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[U]},t[ka]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ae]},t[Da]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[we]},t[Ma]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Je]},t[La]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ye]},t[za]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[et]},t[Ya]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[U]},t[qa]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[U]},t[Ka]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[U,fr]},t[Za]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[ae]},t[Qa]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[G,K,Rs]},t[Ja]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[G,K,Cs]},t[es]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[G,K]},t[ts]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[G]},t[ns]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[U]},t[rs]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[ae]},t[os]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[we]},t[cs]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Je]},t[is]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ye]},t[as]={textureFormat:pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[et]},t[ss]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[U]},t[us]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[U]},t[fs]={textureFormat:B,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[ae]},t[ls]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[U,ur,Nt]},t[ms]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[U,sr]},t[xs]={textureFormat:B,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Nt]},t[_s]={textureFormat:B,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[G,K]},t[ys]={textureFormat:B,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[G]},t[Es]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[Ts]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ae]},t[ps]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nt]},t[As]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[we]},t[hs]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Je]},t[bs]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[et]},t[Fs]={textureFormat:se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ye]},t[Ss]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[we,ye]},t[ws]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ye]},t[Is]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[G]},t[Ps]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ns]},t[vs]={textureFormat:Vt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Bs]},Object.keys(t).forEach(function(n){const r=t[n];r.bytesPerElementMap={},r.bytesPerElement.forEach(function(o,c){const i=r.type[c];r.bytesPerElementMap[i]=o})}),dt=t}return dt[e]}function pn(e,t){const n=yt(e);if(!n)throw"unknown internal format";const r=n.bytesPerElementMap[t];if(r===void 0)throw"unknown internal format";return r}function le(e){const t=yt(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function lr(e){return(e&e-1)===0}function An(e,t,n,r){if(!Fe(e))return lr(t)&&lr(n);const o=yt(r);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function hn(e){const t=yt(e);if(!t)throw"unknown internal format";return t.textureFilterable}function co(e){const t=oo[e];if(!t)throw"unknown format: "+e;return t.numColorComponents}function io(e,t,n){return Re(t)?Be(t):n||U}function tt(e,t,n,r,o){if(o%1!==0)throw"can't guess dimensions";if(!n&&!r){const c=Math.sqrt(o/(t===oe?6:1));c%1===0?(n=c,r=c):(n=o,r=1)}else if(r){if(!n&&(n=o/r,n%1))throw"can't guess dimensions"}else if(r=o/n,r%1)throw"can't guess dimensions";return{width:n,height:r}}function bn(e){ne.textureColor=new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Fn(e){en(e,ne),e.textureColor&&bn(e.textureColor)}function Ce(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(Ia,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(va,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(Pa,t.flipY)}function ao(e){e.pixelStorei(Tn,4),Fe(e)&&(e.pixelStorei(Jr,0),e.pixelStorei(eo,0),e.pixelStorei(to,0),e.pixelStorei(no,0),e.pixelStorei(ro,0))}function so(e,t,n,r){r.minMag&&(n.call(e,t,Ot,r.minMag),n.call(e,t,gt,r.minMag)),r.min&&n.call(e,t,Ot,r.min),r.mag&&n.call(e,t,gt,r.mag),r.wrap&&(n.call(e,t,ot,r.wrap),n.call(e,t,ct,r.wrap),(t===ue||xi(e,t))&&n.call(e,t,ar,r.wrap)),r.wrapR&&n.call(e,t,ar,r.wrapR),r.wrapS&&n.call(e,t,ot,r.wrapS),r.wrapT&&n.call(e,t,ct,r.wrapT),r.minLod!==void 0&&n.call(e,t,Aa,r.minLod),r.maxLod!==void 0&&n.call(e,t,ha,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,ba,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,Fa,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,wa,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,Sa,r.compareMode)}function Et(e,t,n){const r=n.target||ce;e.bindTexture(r,t),so(e,r,e.texParameteri,n)}function Sn(e,t,n){so(e,t,e.samplerParameteri,n)}function wn(e,t){const n=e.createSampler();return Sn(e,n,t),n}function uo(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=wn(e,t[r])}),n}function ds(e){return e=e||ne.textureColor,Re(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Ve(e,t,n,r,o,c){n=n||ne.textureOptions,c=c||B;const i=n.target||ce;if(r=r||n.width,o=o||n.height,e.bindTexture(i,t),An(e,r,o,c))e.generateMipmap(i);else{const a=hn(c)?xa:ma;e.texParameteri(i,Ot,a),e.texParameteri(i,gt,a),e.texParameteri(i,ot,rt),e.texParameteri(i,ct,rt)}}function Oe(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Gt(e,t){return t=t||{},t.cubeFaceOrder||[_t,_a,ya,Ea,Ta,pa]}function $t(e,t){const r=Gt(e,t).map(function(o,c){return{face:o,ndx:c}});return r.sort(function(o,c){return o.face-c.face}),r}function Tt(e,t,n,r){r=r||ne.textureOptions;const o=r.target||ce,c=r.level||0;let i=n.width,a=n.height;const s=r.internalFormat||r.format||B,u=le(s),l=r.format||u.format,m=r.type||u.type;if(Ce(e,r),e.bindTexture(o,t),o===oe){const f=n.width,y=n.height;let x,_;if(f/6===y)x=y,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===f)x=f,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(f/3===y/2)x=f/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else if(f/2===y/3)x=f/2,_=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);const E=Qr();E?(E.canvas.width=x,E.canvas.height=x,i=x,a=x,$t(e,r).forEach(function(T){const p=_[T.ndx*2+0]*x,A=_[T.ndx*2+1]*x;E.drawImage(n,p,A,x,x,0,0,x,x),e.texImage2D(T.face,c,s,l,m,E.canvas)}),E.canvas.width=1,E.canvas.height=1):typeof createImageBitmap<"u"&&(i=x,a=x,$t(e,r).forEach(function(T){const p=_[T.ndx*2+0]*x,A=_[T.ndx*2+1]*x;e.texImage2D(T.face,c,s,x,x,0,l,m,null),createImageBitmap(n,p,A,x,x,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(b){Ce(e,r),e.bindTexture(o,t),e.texImage2D(T.face,c,s,l,m,b),Oe(r)&&Ve(e,t,r,i,a,s)})}))}else if(o===ue||o===fe){const f=Math.min(n.width,n.height),y=Math.max(n.width,n.height),x=y/f;if(x%1!==0)throw"can not compute 3D dimensions of element";const _=n.width===y?1:0,E=n.height===y?1:0;e.pixelStorei(Tn,1),e.pixelStorei(Jr,n.width),e.pixelStorei(eo,0),e.pixelStorei(ro,0),e.texImage3D(o,c,s,f,f,f,0,l,m,null);for(let T=0;T<x;++T){const p=T*f*_,A=T*f*E;e.pixelStorei(to,p),e.pixelStorei(no,A),e.texSubImage3D(o,c,0,0,T,f,f,1,l,m,n)}ao(e)}else e.texImage2D(o,c,s,l,m,n);Oe(r)&&Ve(e,t,r,i,a,s),Et(e,t,r)}function Ne(){}function Us(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function Ds(e,t){return t===void 0&&!Us(e)?"anonymous":t}function Ms(e,t,n){n=n||Ne;let r;if(t=t!==void 0?t:ne.crossOrigin,t=Ds(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",c),r.removeEventListener("load",i),r=null},c=function(){const s="couldn't load image: "+e;dr(s),n(s,r),o()},i=function(){n(null,r),o()};return r.addEventListener("error",c),r.addEventListener("load",i),r.src=e,r}else if(typeof ImageBitmap<"u"){let o,c;const i=function(){n(o,c)},a={};t&&(a.mode="cors"),fetch(e,a).then(function(s){if(!s.ok)throw s;return s.blob()}).then(function(s){return createImageBitmap(s,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(s){c=s,setTimeout(i)}).catch(function(s){o=s,setTimeout(i)}),r=null}return r}function fo(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function In(e,t,n){return fo(e)?(setTimeout(function(){n(null,e)}),e):Ms(e,t,n)}function vn(e,t,n){n=n||ne.textureOptions;const r=n.target||ce;if(e.bindTexture(r,t),n.color===!1)return;const o=ds(n.color);if(r===oe)for(let c=0;c<6;++c)e.texImage2D(_t+c,0,B,1,1,0,B,U,o);else r===ue||r===fe?e.texImage3D(r,0,B,1,1,1,0,B,U,o):e.texImage2D(r,0,B,1,1,0,B,U,o)}function Pn(e,t,n,r){return r=r||Ne,n=n||ne.textureOptions,vn(e,t,n),n=Object.assign({},n),In(n.src,n.crossOrigin,function(c,i){c?r(c,t,i):(Tt(e,t,i,n),r(null,t,i))})}function Ls(e,t,n,r){r=r||Ne;const o=n.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";const c=n.level||0,i=n.internalFormat||n.format||B,a=le(i),s=n.format||a.format,u=n.type||U,l=n.target||ce;if(l!==oe)throw"target must be TEXTURE_CUBE_MAP";vn(e,t,n),n=Object.assign({},n);let m=6;const f=[],y=Gt(e,n);let x;function _(E){return function(T,p){--m,T?f.push(T):p.width!==p.height?f.push("cubemap face img is not a square: "+p.src):(Ce(e,n),e.bindTexture(l,t),m===5?Gt().forEach(function(A){e.texImage2D(A,c,i,s,u,p)}):e.texImage2D(E,c,i,s,u,p),Oe(n)&&e.generateMipmap(l)),m===0&&r(f.length?f:void 0,t,x)}}x=o.map(function(E,T){return In(E,n.crossOrigin,_(y[T]))})}function zs(e,t,n,r){r=r||Ne;const o=n.src,c=n.internalFormat||n.format||B,i=le(c),a=n.format||i.format,s=n.type||U,u=n.target||fe;if(u!==ue&&u!==fe)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";vn(e,t,n),n=Object.assign({},n);let l=o.length;const m=[];let f;const y=n.level||0;let x=n.width,_=n.height;const E=o.length;let T=!0;function p(A){return function(b,h){if(--l,b)m.push(b);else{if(Ce(e,n),e.bindTexture(u,t),T){T=!1,x=n.width||h.width,_=n.height||h.height,e.texImage3D(u,y,c,x,_,E,0,a,s,null);for(let F=0;F<E;++F)e.texSubImage3D(u,y,0,0,F,x,_,1,a,s,h)}else{let F=h,w;(h.width!==x||h.height!==_)&&(w=Qr(),F=w.canvas,w.canvas.width=x,w.canvas.height=_,w.drawImage(h,0,0,x,_)),e.texSubImage3D(u,y,0,0,A,x,_,1,a,s,F),w&&F===w.canvas&&(w.canvas.width=0,w.canvas.height=0)}Oe(n)&&e.generateMipmap(u)}l===0&&r(m.length?m:void 0,t,f)}}f=o.map(function(A,b){return In(A,n.crossOrigin,p(b))})}function Rn(e,t,n,r){r=r||ne.textureOptions;const o=r.target||ce;e.bindTexture(o,t);let c=r.width,i=r.height,a=r.depth;const s=r.level||0,u=r.internalFormat||r.format||B,l=le(u),m=r.format||l.format,f=r.type||io(e,n,l.type);if(Re(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const E=st(f);n=new E(n)}const y=pn(u,f),x=n.byteLength/y;if(x%1)throw"length wrong size for format: "+Pe(e,m);let _;if(o===ue||o===fe)if(!c&&!i&&!a){const E=Math.cbrt(x);if(E%1!==0)throw"can't guess cube size of array of numElements: "+x;c=E,i=E,a=E}else c&&(!i||!a)?(_=tt(e,o,i,a,x/c),i=_.width,a=_.height):i&&(!c||!a)?(_=tt(e,o,c,a,x/i),c=_.width,a=_.height):(_=tt(e,o,c,i,x/a),c=_.width,i=_.height);else _=tt(e,o,c,i,x),c=_.width,i=_.height;if(ao(e),e.pixelStorei(Tn,r.unpackAlignment||1),Ce(e,r),o===oe){const E=y/n.BYTES_PER_ELEMENT,T=x/6*E;$t(e,r).forEach(p=>{const A=T*p.ndx,b=n.subarray(A,A+T);e.texImage2D(p.face,s,u,c,i,0,m,f,b)})}else o===ue||o===fe?e.texImage3D(o,s,u,c,i,a,0,m,f,n):e.texImage2D(o,s,u,c,i,0,m,f,n);return{width:c,height:i,depth:a,type:f}}function Cn(e,t,n){const r=n.target||ce;e.bindTexture(r,t);const o=n.level||0,c=n.internalFormat||n.format||B,i=le(c),a=n.format||i.format,s=n.type||i.type;if(Ce(e,n),r===oe)for(let u=0;u<6;++u)e.texImage2D(_t+u,o,c,n.width,n.height,0,a,s,null);else r===ue||r===fe?e.texImage3D(r,o,c,n.width,n.height,n.depth,0,a,s,null):e.texImage2D(r,o,c,n.width,n.height,0,a,s,null)}function pt(e,t,n){n=n||Ne,t=t||ne.textureOptions;const r=e.createTexture(),o=t.target||ce;let c=t.width||1,i=t.height||1;const a=t.internalFormat||B;e.bindTexture(o,r),o===oe&&(e.texParameteri(o,ot,rt),e.texParameteri(o,ct,rt));let s=t.src;if(s)if(typeof s=="function"&&(s=s(e,t)),typeof s=="string")Pn(e,r,t,n);else if(Re(s)||Array.isArray(s)&&(typeof s[0]=="number"||Array.isArray(s[0])||Re(s[0]))){const u=Rn(e,r,s,t);c=u.width,i=u.height}else Array.isArray(s)&&(typeof s[0]=="string"||fo(s[0]))?o===oe?Ls(e,r,t,n):zs(e,r,t,n):(Tt(e,r,s,t),c=s.width,i=s.height);else Cn(e,r,t);return Oe(t)&&Ve(e,r,t,c,i,a),Et(e,r,t),r}function Bn(e,t,n,r,o,c){r=r||n.width,o=o||n.height,c=c||n.depth;const i=n.target||ce;e.bindTexture(i,t);const a=n.level||0,s=n.internalFormat||n.format||B,u=le(s),l=n.format||u.format;let m;const f=n.src;if(f&&(Re(f)||Array.isArray(f)&&typeof f[0]=="number")?m=n.type||io(e,f,u.type):m=n.type||u.type,i===oe)for(let y=0;y<6;++y)e.texImage2D(_t+y,a,s,r,o,0,l,m,null);else i===ue||i===fe?e.texImage3D(i,a,s,r,o,c,0,l,m,null):e.texImage2D(i,a,s,r,o,0,l,m,null)}function Vs(e){return typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"}function lo(e,t,n){n=n||Ne;let r=0;const o=[],c={},i={};function a(){r===0&&setTimeout(function(){n(o.length?o:void 0,c,i)},0)}return Object.keys(t).forEach(function(s){const u=t[s];let l;Vs(u.src)&&(l=function(m,f,y){i[s]=y,--r,m&&o.push(m),a()},++r),c[s]=pt(e,u,l)}),a(),c}var Os=Object.freeze({__proto__:null,setTextureDefaults_:Fn,createSampler:wn,createSamplers:uo,setSamplerParameters:Sn,createTexture:pt,setEmptyTexture:Cn,setTextureFromArray:Rn,loadTextureFromUrl:Pn,setTextureFromElement:Tt,setTextureFilteringForSize:Ve,setTextureParameters:Et,setDefaultTextureColor:bn,createTextures:lo,resizeTexture:Bn,canGenerateMipmap:An,canFilter:hn,getNumComponentsForFormat:co,getBytesPerElementForInternalFormat:pn,getFormatAndTypeForInternalFormat:le});const Nn=dr,gs=Ur;function dn(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const it=33984,Gs=35048,At=34962,$s=34963,Un=35345,mr=35982,xr=36386,ks=35713,js=35714,Hs=35632,Xs=35633,Ws=35981,mo=35718,Ys=35721,qs=35971,Ks=35382,Zs=35396,Qs=35398,Js=35392,eu=35395,ht=5126,xo=35664,_o=35665,yo=35666,Dn=5124,Eo=35667,To=35668,po=35669,Ao=35670,ho=35671,bo=35672,Fo=35673,So=35674,wo=35675,Io=35676,tu=35678,nu=35680,ru=35679,ou=35682,cu=35685,iu=35686,au=35687,su=35688,uu=35689,fu=35690,lu=36289,mu=36292,xu=36293,Mn=5125,vo=36294,Po=36295,Ro=36296,_u=36298,yu=36299,Eu=36300,Tu=36303,pu=36306,Au=36307,hu=36308,bu=36311,bt=3553,Ft=34067,Ln=32879,St=35866,S={};function Co(e,t){return S[t].bindPoint}function Fu(e,t){return function(n){e.uniform1f(t,n)}}function Su(e,t){return function(n){e.uniform1fv(t,n)}}function wu(e,t){return function(n){e.uniform2fv(t,n)}}function Iu(e,t){return function(n){e.uniform3fv(t,n)}}function vu(e,t){return function(n){e.uniform4fv(t,n)}}function Bo(e,t){return function(n){e.uniform1i(t,n)}}function No(e,t){return function(n){e.uniform1iv(t,n)}}function Uo(e,t){return function(n){e.uniform2iv(t,n)}}function Do(e,t){return function(n){e.uniform3iv(t,n)}}function Mo(e,t){return function(n){e.uniform4iv(t,n)}}function Pu(e,t){return function(n){e.uniform1ui(t,n)}}function Ru(e,t){return function(n){e.uniform1uiv(t,n)}}function Cu(e,t){return function(n){e.uniform2uiv(t,n)}}function Bu(e,t){return function(n){e.uniform3uiv(t,n)}}function Nu(e,t){return function(n){e.uniform4uiv(t,n)}}function du(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Uu(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Du(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Mu(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Lu(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function zu(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Vu(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Ou(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function gu(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function W(e,t,n,r){const o=Co(e,t);return Fe(e)?function(c){let i,a;!c||ft(e,c)?(i=c,a=null):(i=c.texture,a=c.sampler),e.uniform1i(r,n),e.activeTexture(it+n),e.bindTexture(o,i),e.bindSampler(n,a)}:function(c){e.uniform1i(r,n),e.activeTexture(it+n),e.bindTexture(o,c)}}function Y(e,t,n,r,o){const c=Co(e,t),i=new Int32Array(o);for(let a=0;a<o;++a)i[a]=n+a;return Fe(e)?function(a){e.uniform1iv(r,i),a.forEach(function(s,u){e.activeTexture(it+i[u]);let l,m;!s||ft(e,s)?(l=s,m=null):(l=s.texture,m=s.sampler),e.bindSampler(n,m),e.bindTexture(c,l)})}:function(a){e.uniform1iv(r,i),a.forEach(function(s,u){e.activeTexture(it+i[u]),e.bindTexture(c,s)})}}S[ht]={Type:Float32Array,size:4,setter:Fu,arraySetter:Su};S[xo]={Type:Float32Array,size:8,setter:wu,cols:2};S[_o]={Type:Float32Array,size:12,setter:Iu,cols:3};S[yo]={Type:Float32Array,size:16,setter:vu,cols:4};S[Dn]={Type:Int32Array,size:4,setter:Bo,arraySetter:No};S[Eo]={Type:Int32Array,size:8,setter:Uo,cols:2};S[To]={Type:Int32Array,size:12,setter:Do,cols:3};S[po]={Type:Int32Array,size:16,setter:Mo,cols:4};S[Mn]={Type:Uint32Array,size:4,setter:Pu,arraySetter:Ru};S[vo]={Type:Uint32Array,size:8,setter:Cu,cols:2};S[Po]={Type:Uint32Array,size:12,setter:Bu,cols:3};S[Ro]={Type:Uint32Array,size:16,setter:Nu,cols:4};S[Ao]={Type:Uint32Array,size:4,setter:Bo,arraySetter:No};S[ho]={Type:Uint32Array,size:8,setter:Uo,cols:2};S[bo]={Type:Uint32Array,size:12,setter:Do,cols:3};S[Fo]={Type:Uint32Array,size:16,setter:Mo,cols:4};S[So]={Type:Float32Array,size:32,setter:du,rows:2,cols:2};S[wo]={Type:Float32Array,size:48,setter:Uu,rows:3,cols:3};S[Io]={Type:Float32Array,size:64,setter:Du,rows:4,cols:4};S[cu]={Type:Float32Array,size:32,setter:Mu,rows:2,cols:3};S[iu]={Type:Float32Array,size:32,setter:zu,rows:2,cols:4};S[au]={Type:Float32Array,size:48,setter:Lu,rows:3,cols:2};S[su]={Type:Float32Array,size:48,setter:Ou,rows:3,cols:4};S[uu]={Type:Float32Array,size:64,setter:Vu,rows:4,cols:2};S[fu]={Type:Float32Array,size:64,setter:gu,rows:4,cols:3};S[tu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:bt};S[nu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ft};S[ru]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ln};S[ou]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:bt};S[lu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:St};S[mu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:St};S[xu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ft};S[_u]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:bt};S[yu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ln};S[Eu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ft};S[Tu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:St};S[pu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:bt};S[Au]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ln};S[hu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:Ft};S[bu]={Type:null,size:0,setter:W,arraySetter:Y,bindPoint:St};function wt(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(At,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||ht,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function me(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(At,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Dn,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function It(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(At,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Mn,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function zn(e,t,n){const r=n.size,o=n.count;return function(c){e.bindBuffer(At,c.buffer);const i=c.size||c.numComponents||r,a=i/o,s=c.type||ht,l=S[s].size*i,m=c.normalize||!1,f=c.offset||0,y=l/o;for(let x=0;x<o;++x)e.enableVertexAttribArray(t+x),e.vertexAttribPointer(t+x,a,s,m,l,f+y*x),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+x,c.divisor||0)}}const M={};M[ht]={size:4,setter:wt};M[xo]={size:8,setter:wt};M[_o]={size:12,setter:wt};M[yo]={size:16,setter:wt};M[Dn]={size:4,setter:me};M[Eo]={size:8,setter:me};M[To]={size:12,setter:me};M[po]={size:16,setter:me};M[Mn]={size:4,setter:It};M[vo]={size:8,setter:It};M[Po]={size:12,setter:It};M[Ro]={size:16,setter:It};M[Ao]={size:4,setter:me};M[ho]={size:8,setter:me};M[bo]={size:12,setter:me};M[Fo]={size:16,setter:me};M[So]={size:4,setter:zn,count:2};M[wo]={size:9,setter:zn,count:3};M[Io]={size:16,setter:zn,count:4};const Gu=/ERROR:\s*\d+:(\d+)/gi;function $u(e,t="",n=0){const r=[...t.matchAll(Gu)],o=new Map(r.map((c,i)=>{const a=parseInt(c[1]),s=r[i+1],u=s?s.index:t.length,l=t.substring(c.index,u);return[a-1,l]}));return e.split(`
`).map((c,i)=>{const a=o.get(i);return`${i+1+n}: ${c}${a?`

^^^ ${a}`:""}`}).join(`
`)}const _r=/^[ \t]*\n/;function Lo(e){let t=0;return _r.test(e)&&(t=1,e=e.replace(_r,"")),{lineOffset:t,shaderSource:e}}function zo(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function ku(e,t,n,r){if(r=r||Nn,!e.getShaderParameter(n,ks)){const c=e.getShaderInfoLog(n),{lineOffset:i,shaderSource:a}=Lo(e.getShaderSource(n)),s=`${$u(a,c,i)}
Error compiling ${Pe(e,t)}: ${c}`;return r(s),s}return""}function de(e,t,n){let r,o,c;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const u=e;n=u.errorCallback,e=u.attribLocations,r=u.transformFeedbackVaryings,o=u.transformFeedbackMode,c=u.callback}const i=n||Nn,a=[],s={errorCallback(u,...l){a.push(u),i(u,...l)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:c,errors:a};{let u={};Array.isArray(e)?e.forEach(function(l,m){u[l]=t?t[m]:m}):u=e||{},s.attribLocations=u}return s}const ju=["VERTEX_SHADER","FRAGMENT_SHADER"];function Hu(e,t){if(t.indexOf("frag")>=0)return Hs;if(t.indexOf("vert")>=0)return Xs}function Xu(e,t,n){const r=e.getAttachedShaders(t);for(const o of r)n.has(o)&&e.deleteShader(o);e.deleteProgram(t)}const Wu=(e=0)=>new Promise(t=>setTimeout(t,e));function Vo(e,t,n){const r=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:c,transformFeedbackMode:i}=de(n);for(let a=0;a<t.length;++a){let s=t[a];if(typeof s=="string"){const u=dn(s),l=u?u.text:s;let m=e[ju[a]];u&&u.type&&(m=Hu(e,u.type)||m),s=e.createShader(m),e.shaderSource(s,Lo(l).shaderSource),e.compileShader(s),e.attachShader(r,s)}}Object.entries(o).forEach(([a,s])=>e.bindAttribLocation(r,s,a));{let a=c;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(r,a,i||Ws))}return e.linkProgram(r),r}function He(e,t,n,r,o){const c=de(n,r,o),i=new Set(t),a=Vo(e,t,c);function s(u,l){const m=$o(u,l,c.errorCallback);return m&&Xu(u,l,i),m}if(c.callback){Go(e,a).then(()=>{const u=s(e,a);c.callback(u,u?void 0:a)});return}return s(e,a)?void 0:a}function vt(e){return function(t,n,...r){return new Promise((o,c)=>{const i=de(...r);i.callback=(a,s)=>{a?c(a):o(s)},e(t,n,i)})}}const Oo=vt(He),go=vt(Xn);async function Go(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(c,i)=>c.getProgramParameter(i,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await Wu(o),o=1e3/60;while(!r(e,t))}async function Yu(e,t){for(const n of Object.values(t))await Go(e,n)}function $o(e,t,n){if(n=n||Nn,!e.getProgramParameter(t,js)){const o=e.getProgramInfoLog(t);n(`Error in program linking: ${o}`);const i=e.getAttachedShaders(t).map(a=>ku(e,e.getShaderParameter(a,e.SHADER_TYPE),a,n));return`${o}
${i.filter(a=>a).join(`
`)}`}}function ko(e,t,n,r,o){const c=de(n,r,o),i=[];for(const a of t){const s=dn(a);if(!s)return zo(c,`unknown script element: ${a}`);i.push(s.text)}return He(e,i,c)}function Vn(e,t,n,r,o){return He(e,t,n,r,o)}function jo(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const qu=/(\.|\[|]|\w+)/g,Ku=e=>e>="0"&&e<="9";function Ho(e,t,n,r){const o=e.split(qu).filter(a=>a!=="");let c=0,i="";for(;;){const a=o[c++];i+=a;const s=Ku(a[0]),u=s?parseInt(a):a;if(s&&(i+=o[c++]),c===o.length){n[u]=t;break}else{const m=o[c++],f=m==="[",y=n[u]||(f?[]:{});n[u]=y,n=y,r[i]=r[i]||function(x){return function(_){Ko(x,_)}}(y),i+=m}}}function On(e,t){let n=0;function r(a,s,u){const l=s.name.endsWith("[0]"),m=s.type,f=S[m];if(!f)throw new Error(`unknown type: 0x${m.toString(16)}`);let y;if(f.bindPoint){const x=n;n+=s.size,l?y=f.arraySetter(e,m,x,u,s.size):y=f.setter(e,m,x,u,s.size)}else f.arraySetter&&l?y=f.arraySetter(e,u):y=f.setter(e,u);return y.location=u,y}const o={},c={},i=e.getProgramParameter(t,mo);for(let a=0;a<i;++a){const s=e.getActiveUniform(t,a);if(jo(s))continue;let u=s.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const l=e.getUniformLocation(t,s.name);if(l){const m=r(t,s,l);o[u]=m,Ho(u,m,c,o)}}return o}function gn(e,t){const n={},r=e.getProgramParameter(t,qs);for(let o=0;o<r;++o){const c=e.getTransformFeedbackVarying(t,o);n[c.name]={index:o,type:c.type,size:c.size}}return n}function Gn(e,t,n){t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),n.attribs&&(n=n.attribs);for(const r in n){const o=t[r];if(o){const c=n[r];c.offset?e.bindBufferRange(mr,o.index,c.buffer,c.offset,c.size):e.bindBufferBase(mr,o.index,c.buffer)}}}function Xo(e,t,n){const r=e.createTransformFeedback();return e.bindTransformFeedback(xr,r),e.useProgram(t.program),Gn(e,t,n),e.bindTransformFeedback(xr,null),r}function $n(e,t){const n=e.getProgramParameter(t,mo),r=[],o=[];for(let a=0;a<n;++a){o.push(a),r.push({});const s=e.getActiveUniform(t,a);r[a].name=s.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const s=a[0],u=a[1];e.getActiveUniforms(t,o,e[s]).forEach(function(l,m){r[m][u]=l})});const c={},i=e.getProgramParameter(t,Ks);for(let a=0;a<i;++a){const s=e.getActiveUniformBlockName(t,a),u={index:e.getUniformBlockIndex(t,s),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,Zs),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,Qs),size:e.getActiveUniformBlockParameter(t,a,Js),uniformIndices:e.getActiveUniformBlockParameter(t,a,eu)};u.used=u.usedByVertexShader||u.usedByFragmentShader,c[s]=u}return{blockSpecs:c,uniformData:r}}const yr=/\[\d+\]\.$/,Zu=(e,t)=>((e+(t-1))/t|0)*t;function Qu(e,t,n,r){if(t||n){r=r||1;const c=e.length/4;return function(i){let a=0,s=0;for(let u=0;u<c;++u){for(let l=0;l<r;++l)e[a++]=i[s++];a+=4-r}}}else return function(o){o.length?e.set(o):e[0]=o}}function kn(e,t,n,r){const o=n.blockSpecs,c=n.uniformData,i=o[r];if(!i)return gs("no uniform block object named:",r),{name:r,uniforms:{}};const a=new ArrayBuffer(i.size),s=e.createBuffer(),u=i.index;e.bindBuffer(Un,s),e.uniformBlockBinding(t,i.index,u);let l=r+".";yr.test(l)&&(l=l.replace(yr,"."));const m={},f={},y={};return i.uniformIndices.forEach(function(x){const _=c[x];let E=_.name;E.startsWith(l)&&(E=E.substr(l.length));const T=E.endsWith("[0]");T&&(E=E.substr(0,E.length-3));const p=S[_.type],A=p.Type,b=T?Zu(p.size,16)*_.size:p.size*_.size,h=new A(a,_.offset,b/A.BYTES_PER_ELEMENT);m[E]=h;const F=Qu(h,T,p.rows,p.cols);f[E]=F,Ho(E,F,y,f)}),{name:r,array:a,asFloat:new Float32Array(a),buffer:s,uniforms:m,setters:f}}function Wo(e,t,n){return kn(e,t.program,t.uniformBlockSpec,n)}function jn(e,t,n){const o=(t.uniformBlockSpec||t).blockSpecs[n.name];if(o){const c=o.index;return e.bindBufferRange(Un,c,n.buffer,n.offset||0,n.array.byteLength),!0}return!1}function Yo(e,t,n){jn(e,t,n)&&e.bufferData(Un,n.array,Gs)}function qo(e,t){const n=e.setters;for(const r in t){const o=n[r];if(o){const c=t[r];o(c)}}}function Ko(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):Ko(e[n],t[n])}}function Xe(e,...t){const n=e.uniformSetters||e,r=t.length;for(let o=0;o<r;++o){const c=t[o];if(Array.isArray(c)){const i=c.length;for(let a=0;a<i;++a)Xe(n,c[a])}else for(const i in c){const a=n[i];a&&a(c[i])}}}const Zo=Xe;function Hn(e,t){const n={},r=e.getProgramParameter(t,Ys);for(let o=0;o<r;++o){const c=e.getActiveAttrib(t,o);if(jo(c))continue;const i=e.getAttribLocation(t,c.name),a=M[c.type],s=a.setter(e,i,a);s.location=i,n[c.name]=s}return n}function Pt(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function Rt(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Pt(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer($s,n.indices))}function ge(e,t){const n=On(e,t),r=Hn(e,t),o={program:t,uniformSetters:n,attribSetters:r};return Fe(e)&&(o.uniformBlockSpec=$n(e,t),o.transformFeedbackInfo=gn(e,t)),o}const Ju=/\s|{|}|;/;function Xn(e,t,n,r,o){const c=de(n,r,o),i=[];if(t=t.map(function(u){if(!Ju.test(u)){const l=dn(u);if(l)u=l.text;else{const m=`no element with id: ${u}`;c.errorCallback(m),i.push(m)}}return u}),i.length)return zo(c,"");const a=c.callback;a&&(c.callback=(u,l)=>{a(u,u?void 0:ge(e,l))});const s=Vn(e,t,c);return s?ge(e,s):null}function Er(e,t,n,r,o){for(const[c,i]of Object.entries(t)){const a={...o},s=n[c];Array.isArray(s)||Object.assign(a,s);const u=$o(e,i,a.errorCallback);if(u){for(const l of Object.values(t)){const m=e.getAttachedShaders(l);e.deleteProgram(l);for(const f of m)r.has(f)||e.deleteShader(f)}return u}}}function Ct(e,t,n={}){const r=new Set,o=Object.fromEntries(Object.entries(t).map(([i,a])=>{const s={...n},u=Array.isArray(a)?a:a.shaders;return Array.isArray(a)||Object.assign(s,a),u.forEach(r.add,r),[i,Vo(e,u,s)]}));if(n.callback){Yu(e,o).then(()=>{const i=Er(e,o,t,r,n);n.callback(i,i?void 0:o)});return}return Er(e,o,t,r,n)?void 0:o}function Wn(e,t,n){n=de(n);function r(i,a){return Object.fromEntries(Object.entries(a).map(([s,u])=>[s,ge(i,u)]))}const o=n.callback;o&&(n.callback=(i,a)=>{o(i,i?void 0:r(e,a))});const c=Ct(e,t,n);if(!(o||!c))return r(e,c)}const Qo=vt(Ct),Jo=vt(Wn);var ef=Object.freeze({__proto__:null,createAttributeSetters:Hn,createProgram:He,createProgramAsync:Oo,createPrograms:Ct,createProgramsAsync:Qo,createProgramFromScripts:ko,createProgramFromSources:Vn,createProgramInfo:Xn,createProgramInfoAsync:go,createProgramInfos:Wn,createProgramInfosAsync:Jo,createProgramInfoFromProgram:ge,createUniformSetters:On,createUniformBlockSpecFromProgram:$n,createUniformBlockInfoFromProgram:kn,createUniformBlockInfo:Wo,createTransformFeedback:Xo,createTransformFeedbackInfo:gn,bindTransformFeedbackInfo:Gn,setAttributes:Pt,setBuffersAndAttributes:Rt,setUniforms:Xe,setUniformsAndBindTextures:Zo,setUniformBlock:Yo,setBlockUniforms:qo,bindUniformBlock:jn});const ec=4,Tr=5123;function Yn(e,t,n,r,o,c){n=n===void 0?ec:n;const i=t.indices,a=t.elementType,s=r===void 0?t.numElements:r;o=o===void 0?0:o,a||i?c!==void 0?e.drawElementsInstanced(n,s,a===void 0?Tr:t.elementType,o,c):e.drawElements(n,s,a===void 0?Tr:t.elementType,o):c!==void 0?e.drawArraysInstanced(n,o,s,c):e.drawArrays(n,o,s)}function tc(e,t){let n=null,r=null;t.forEach(function(o){if(o.active===!1)return;const c=o.programInfo,i=o.vertexArrayInfo||o.bufferInfo;let a=!1;const s=o.type===void 0?ec:o.type;c!==n&&(n=c,e.useProgram(c.program),a=!0),(a||i!==r)&&(r&&r.vertexArrayObject&&!i.vertexArrayObject&&e.bindVertexArray(null),r=i,Rt(e,c,i)),Xe(c,o.uniforms),Yn(e,i,s,o.count,o.offset,o.instanceCount)}),r&&r.vertexArrayObject&&e.bindVertexArray(null)}var tf=Object.freeze({__proto__:null,drawBufferInfo:Yn,drawObjectList:tc});const nc=36160,he=36161,nf=3553,rf=5121,of=6402,cf=6408,af=33190,sf=36012,uf=35056,ff=36013,lf=32854,mf=32855,xf=36194,rc=33189,oc=6401,cc=36168,qn=34041,kt=36064,Bt=36096,ic=36128,Kn=33306,jt=33071,Ht=9729,ac=[{format:cf,type:rf,min:Ht,wrap:jt},{format:qn}],Q={};Q[qn]=Kn;Q[oc]=ic;Q[cc]=ic;Q[of]=Bt;Q[rc]=Bt;Q[af]=Bt;Q[sf]=Bt;Q[uf]=Kn;Q[ff]=Kn;function _f(e,t){return Q[e]||Q[t]}const xe={};xe[lf]=!0;xe[mf]=!0;xe[xf]=!0;xe[qn]=!0;xe[rc]=!0;xe[oc]=!0;xe[cc]=!0;function yf(e){return xe[e]}const Ef=32;function Tf(e){return e>=kt&&e<kt+Ef}function sc(e,t,n,r){const o=nc,c=e.createFramebuffer();e.bindFramebuffer(o,c),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight,t=t||ac;const i=[],a={framebuffer:c,attachments:[],width:n,height:r};return t.forEach(function(s,u){let l=s.attachment;const m=s.samples,f=s.format;let y=s.attachmentPoint||_f(f,s.internalFormat);if(y||(y=kt+u),Tf(y)&&i.push(y),!l)if(m!==void 0||yf(f))l=e.createRenderbuffer(),e.bindRenderbuffer(he,l),m>1?e.renderbufferStorageMultisample(he,m,f,n,r):e.renderbufferStorage(he,f,n,r);else{const x=Object.assign({},s);x.width=n,x.height=r,x.auto===void 0&&(x.auto=!1,x.min=x.min||x.minMag||Ht,x.mag=x.mag||x.minMag||Ht,x.wrapS=x.wrapS||x.wrap||jt,x.wrapT=x.wrapT||x.wrap||jt),l=pt(e,x)}if(Dr(e,l))e.framebufferRenderbuffer(o,y,he,l);else if(ft(e,l))s.layer!==void 0?e.framebufferTextureLayer(o,y,l,s.level||0,s.layer):e.framebufferTexture2D(o,y,s.target||nf,l,s.level||0);else throw new Error("unknown attachment type");a.attachments.push(l)}),e.drawBuffers&&e.drawBuffers(i),a}function uc(e,t,n,r,o){r=r||e.drawingBufferWidth,o=o||e.drawingBufferHeight,t.width=r,t.height=o,n=n||ac,n.forEach(function(c,i){const a=t.attachments[i],s=c.format,u=c.samples;if(u!==void 0||Dr(e,a))e.bindRenderbuffer(he,a),u>1?e.renderbufferStorageMultisample(he,u,s,r,o):e.renderbufferStorage(he,s,r,o);else if(ft(e,a))Bn(e,a,c,r,o);else throw new Error("unknown attachment type")})}function fc(e,t,n){n=n||nc,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}var pf=Object.freeze({__proto__:null,bindFramebufferInfo:fc,createFramebufferInfo:sc,resizeFramebufferInfo:uc});const Af=34963;function lc(e,t,n){const r=e.createVertexArray();return e.bindVertexArray(r),t.length||(t=[t]),t.forEach(function(o){Rt(e,o,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}function Zn(e,t,n,r){const o=e.createVertexArray();return e.bindVertexArray(o),Pt(t,n),r&&e.bindBuffer(Af,r),e.bindVertexArray(null),o}function mc(e,t,n){return Zn(e,t.attribSetters||t,n.attribs,n.indices)}var hf=Object.freeze({__proto__:null,createVertexArrayInfo:lc,createVAOAndSetAttributes:Zn,createVAOFromBufferInfo:mc});const Qn={addExtensionsToContext:!0};function bf(e){en(e,Qn),tn(e),Fn(e)}const Ff=/^(.*?)_/;function Sf(e,t){Pe(e,0);const n=e.getExtension(t);if(n){const r={},o=Ff.exec(t)[1],c="_"+o;for(const i in n){const a=n[i],s=typeof a=="function",u=s?o:c;let l=i;i.endsWith(u)&&(l=i.substring(0,i.length-u.length)),e[l]!==void 0?!s&&e[l]!==a&&Ur(l,e[l],a,i):s?e[l]=function(m){return function(){return m.apply(n,arguments)}}(a):(e[l]=a,r[l]=a)}r.constructor={name:n.constructor.name},Pe(r,0)}return n}const pr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Jn(e){for(let t=0;t<pr.length;++t)Sf(e,pr[t])}function wf(e,t){const n=["webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=e.getContext(n[o],t),r){Qn.addExtensionsToContext&&Jn(r);break}return r}function If(e,t){return wf(e,t)}function vf(e,t){const n=["webgl2","webgl","experimental-webgl"];let r=null;for(let o=0;o<n.length;++o)if(r=e.getContext(n[o],t),r){Qn.addExtensionsToContext&&Jn(r);break}return r}function Pf(e,t){return vf(e,t)}function Rf(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;return e.width!==n||e.height!==r?(e.width=n,e.height=r,!0):!1}const P=Object.freeze(Object.defineProperty({__proto__:null,addExtensionsToContext:Jn,attributes:di,bindFramebufferInfo:fc,bindTransformFeedbackInfo:Gn,bindUniformBlock:jn,canFilter:hn,canGenerateMipmap:An,createAttribsFromArrays:rn,createAttributeSetters:Hn,createBufferFromArray:cn,createBufferFromTypedArray:Ge,createBufferInfoFromArrays:on,createBuffersFromArrays:an,createFramebufferInfo:sc,createProgram:He,createProgramAsync:Oo,createProgramFromScripts:ko,createProgramFromSources:Vn,createProgramInfo:Xn,createProgramInfoAsync:go,createProgramInfoFromProgram:ge,createProgramInfos:Wn,createProgramInfosAsync:Jo,createPrograms:Ct,createProgramsAsync:Qo,createSampler:wn,createSamplers:uo,createTexture:pt,createTextures:lo,createTransformFeedback:Xo,createTransformFeedbackInfo:gn,createUniformBlockInfo:Wo,createUniformBlockInfoFromProgram:kn,createUniformBlockSpecFromProgram:$n,createUniformSetters:On,createVAOAndSetAttributes:Zn,createVAOFromBufferInfo:mc,createVertexArrayInfo:lc,draw:tf,drawBufferInfo:Yn,drawObjectList:tc,framebuffers:pf,getArray_:$e,getBytesPerElementForInternalFormat:pn,getContext:Pf,getFormatAndTypeForInternalFormat:le,getGLTypeForTypedArray:Be,getGLTypeForTypedArrayType:at,getNumComponentsForFormat:co,getNumComponents_:ke,getTypedArrayTypeForGLType:st,getWebGLContext:If,glEnumToString:Pe,isArrayBuffer:be,isWebGL1:Zr,isWebGL2:Fe,loadTextureFromUrl:Pn,m4:Br,primitives:Kr,programs:ef,resizeCanvasToDisplaySize:Rf,resizeFramebufferInfo:uc,resizeTexture:Bn,setAttribInfoBufferFromArray:Gr,setAttributeDefaults_:tn,setAttributePrefix:Vr,setAttributes:Pt,setBlockUniforms:qo,setBuffersAndAttributes:Rt,setDefaultTextureColor:bn,setDefaults:bf,setEmptyTexture:Cn,setSamplerParameters:Sn,setTextureDefaults_:Fn,setTextureFilteringForSize:Ve,setTextureFromArray:Rn,setTextureFromElement:Tt,setTextureParameters:Et,setUniformBlock:Yo,setUniforms:Xe,setUniformsAndBindTextures:Zo,textures:Os,typedarrays:fi,utils:la,v3:vr,vertexArrays:hf},Symbol.toStringTag,{value:"Module"}));let $=Float32Array;function Cf(e){const t=$;return $=e,t}function Bf(e,t){const n=new $(2);return e&&(n[0]=e),t&&(n[1]=t),n}function Nf(e,t,n){return n=n||new $(2),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function df(e,t,n){return n=n||new $(2),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function Uf(e,t,n,r){return r=r||new $(2),r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r}function Df(e,t,n,r){return r=r||new $(2),r[0]=e[0]+n[0]*(t[0]-e[0]),r[1]=e[1]+n[1]*(t[1]-e[1]),r}function Mf(e,t,n){return n=n||new $(2),n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}function Lf(e,t,n){return n=n||new $(2),n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function zf(e,t,n){return n=n||new $(2),n[0]=e[0]*t,n[1]=e[1]*t,n}function Vf(e,t,n){return n=n||new $(2),n[0]=e[0]/t,n[1]=e[1]/t,n}function Of(e,t){return e[0]*t[0]+e[1]*t[1]}function gf(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Gf(e){return e[0]*e[0]+e[1]*e[1]}function $f(e,t){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function kf(e,t){const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function jf(e,t){t=t||new $(2);const n=e[0]*e[0]+e[1]*e[1],r=Math.sqrt(n);return r>1e-5?(t[0]=e[0]/r,t[1]=e[1]/r):(t[0]=0,t[1]=0),t}function Hf(e,t){return t=t||new $(2),t[0]=-e[0],t[1]=-e[1],t}function Xf(e,t){return t=t||new $(2),t[0]=e[0],t[1]=e[1],t}function Wf(e,t,n){return n=n||new $(2),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n}function Yf(e,t,n){return n=n||new $(2),n[0]=e[0]/t[0],n[1]=e[1]/t[1],n}const qf=Object.freeze(Object.defineProperty({__proto__:null,add:Nf,copy:Xf,create:Bf,distance:$f,distanceSq:kf,divScalar:Vf,divide:Yf,dot:Of,length:gf,lengthSq:Gf,lerp:Uf,lerpV:Df,max:Mf,min:Lf,mulScalar:zf,multiply:Wf,negate:Hf,normalize:jf,setDefaultType:Cf,subtract:df},Symbol.toStringTag,{value:"Module"})),I=Br,Ar=vr,xc=Kr,hr=qf,Kf=`#version 300 es

precision mediump float;

in vec3 v_color;

out vec4 frag_color;

void main() {
    frag_color = vec4(v_color, 1.0f);
}`,Zf=`#version 300 es

in vec3 a_position;
in vec3 a_color;

out vec3 v_color;

void main() {
    v_color = a_color;
    gl_Position = vec4(a_position, 1.0f);
}`;function Qf(e){P.setDefaults({attribPrefix:"a_"});const t=P.createProgramInfo(e,[Zf,Kf]),n={position:{numComponents:3,data:[0,.5,0,-.5,-.5,0,.5,-.5,0]},color:{numComponents:3,data:[1,0,0,0,1,0,0,0,1]},indices:{numComponents:3,data:[0,1,2]}},r=P.createVertexArrayInfo(e,t,P.createBufferInfoFromArrays(e,n));return o=>{P.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(t.program),P.setBuffersAndAttributes(e,t,r),P.drawBufferInfo(e,r)}}const Jf=`#version 300 es

precision mediump float;

in vec4 v_position;
in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,e0=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 position;
in vec3 normal;
in vec2 texcoord;

out vec4 v_position;
out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = texcoord;
  v_position = u_worldViewProjection * position;
  v_normal = (u_worldInverseTranspose * vec4(normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * position)).xyz;
  gl_Position = v_position;
}
`;function t0(e){P.setDefaults({attribPrefix:""});const t=P.createProgramInfo(e,[e0,Jf]),n={position:[1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1],normal:[1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1],texcoord:[1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]},r=P.createBufferInfoFromArrays(e,n),o=P.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),c={u_lightWorldPos:[1,8,-10],u_lightColor:[1,.8,.8,1],u_ambient:[0,0,0,1],u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1,u_diffuse:o,u_viewInverse:I.identity(),u_world:I.identity(),u_worldInverseTranspose:I.identity(),u_worldViewProjection:I.identity()};return i=>{i*=.001,P.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const a=30*Math.PI/180,s=e.canvas.clientWidth/e.canvas.clientHeight,m=I.perspective(a,s,.5,10),f=[1,4,-6],y=[0,0,0],x=[0,1,0],_=I.lookAt(f,y,x),E=I.inverse(_),T=I.multiply(m,E),p=I.rotationY(i);c.u_viewInverse=_,c.u_world=p,c.u_worldInverseTranspose=I.transpose(I.inverse(p)),c.u_worldViewProjection=I.multiply(T,p),e.useProgram(t.program),P.setBuffersAndAttributes(e,t,r),P.setUniforms(t,c),e.drawElements(e.TRIANGLES,r.numElements,e.UNSIGNED_SHORT,0)}}const n0=`#version 300 es

precision mediump float;

in vec2 v_texCoord;
in vec3 v_normal;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 a_normal = normalize(v_normal);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(a_normal, surfaceToLight), dot(a_normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,r0=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;

out vec2 v_texCoord;
out vec3 v_normal;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;
  v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;
  v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;
  gl_Position = u_worldViewProjection * a_position;
}
`;function o0(e){P.setDefaults({attribPrefix:"a_"});const t=P.createProgramInfo(e,[r0,n0]),n=P.createVertexArrayInfo(e,t,xc.createSphereBufferInfo(e,1.5,24,12)),r=P.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall.jpg"}),o={u_lightWorldPos:[1,8,-10],u_lightColor:[1,1,1,1],u_ambient:[.1,.1,.1,1],u_specular:[.2,.2,.2,1],u_shininess:32,u_specularFactor:1,u_diffuse:r,u_viewInverse:I.identity(),u_world:I.identity(),u_worldInverseTranspose:I.identity(),u_worldViewProjection:I.identity()};return c=>{c*=1e-4,P.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const i=30*Math.PI/180,a=e.canvas.clientWidth/e.canvas.clientHeight,l=I.perspective(i,a,.5,10),m=[1,4,-6],f=[0,0,0],y=[0,1,0],x=I.lookAt(m,f,y),_=I.inverse(x),E=I.multiply(l,_),T=I.rotationY(c);Object.assign(o,{u_viewInverse:x,u_world:T,u_worldInverseTranspose:I.transpose(I.inverse(T)),u_worldViewProjection:I.multiply(E,T)}),e.useProgram(t.program),P.setBuffersAndAttributes(e,t,n),P.setUniforms(t,o),P.drawBufferInfo(e,n)}}const c0=`#version 300 es

precision mediump float;

in vec2 v_texCoord;
in vec3 v_surfaceToLight;
in vec3 v_surfaceToView;

uniform vec4 u_lightColor;
uniform vec4 u_ambient;
uniform sampler2D u_diffuse;
uniform sampler2D u_normal;
uniform vec4 u_specular;
uniform float u_shininess;
uniform float u_specularFactor;

out vec4 outColor;

vec4 lit(float l, float h, float m) {
  return vec4(1.0f, max(l, 0.0f), (l > 0.0f) ? pow(max(0.0f, h), m) : 0.0f, 1.0f);
}

void main() {
  vec4 diffuseColor = texture(u_diffuse, v_texCoord);
  vec3 normal = texture(u_normal, v_texCoord).rgb;
  normal = normalize(normal * 2.0 - 1.0);
  vec3 surfaceToLight = normalize(v_surfaceToLight);
  vec3 surfaceToView = normalize(v_surfaceToView);
  vec3 halfVector = normalize(surfaceToLight + surfaceToView);
  vec4 litR = lit(dot(normal, surfaceToLight), dot(normal, halfVector), u_shininess);
  outColor = vec4((u_lightColor * (diffuseColor * litR.y + diffuseColor * u_ambient +
    u_specular * litR.z * u_specularFactor)).rgb, diffuseColor.a);
}
`,i0=`#version 300 es

uniform mat4 u_worldViewProjection;
uniform vec3 u_lightWorldPos;
uniform mat4 u_world;
uniform mat4 u_viewInverse;
uniform mat4 u_worldInverseTranspose;

in vec4 a_position;
in vec3 a_normal;
in vec2 a_texcoord;
in vec3 a_tangent;

out vec2 v_texCoord;
out vec3 v_surfaceToLight;
out vec3 v_surfaceToView;

void main() {
  v_texCoord = a_texcoord;
  vec3 tangent = normalize((u_worldInverseTranspose * vec4(a_tangent, 0)).xyz);
  vec3 normal = normalize((u_worldInverseTranspose * vec4(a_normal, 0)).xyz);
  tangent = normalize(tangent - dot(tangent, normal) * normal); // re-orthogonalize tangent with respect to normal
  vec3 bitangent = cross(normal, tangent); // retrieve perpendicular bitangent with the cross product of normal and tangent
  mat3 tbn = transpose(mat3(tangent, bitangent, normal));
  v_surfaceToLight = tbn * (u_lightWorldPos - (u_world * a_position).xyz);
  v_surfaceToView = tbn * ((u_viewInverse[3] - (u_world * a_position)).xyz);
  gl_Position = u_worldViewProjection * a_position;
}
`;function a0(e){P.setDefaults({attribPrefix:"a_"});const t=P.createProgramInfo(e,[i0,c0]),n=s0(xc.createSphereVertices(1.5,24,12)),r=P.createVertexArrayInfo(e,t,P.createBufferInfoFromArrays(e,n)),o=P.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall.jpg"}),c=P.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:"brickwall_normal.jpg"}),i={u_lightWorldPos:[1,8,-10],u_lightColor:[1,1,1,1],u_ambient:[.1,.1,.1,1],u_specular:[.2,.2,.2,1],u_shininess:32,u_specularFactor:1,u_diffuse:o,u_normal:c,u_viewInverse:I.identity(),u_world:I.identity(),u_worldInverseTranspose:I.identity(),u_worldViewProjection:I.identity()};return a=>{a*=1e-4,P.resizeCanvasToDisplaySize(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=30*Math.PI/180,u=e.canvas.clientWidth/e.canvas.clientHeight,f=I.perspective(s,u,.5,10),y=[1,4,-6],x=[0,0,0],_=[0,1,0],E=I.lookAt(y,x,_),T=I.inverse(E),p=I.multiply(f,T),A=I.rotationY(a);Object.assign(i,{u_viewInverse:E,u_world:A,u_worldInverseTranspose:I.transpose(I.inverse(A)),u_worldViewProjection:I.multiply(p,A)}),e.useProgram(t.program),P.setBuffersAndAttributes(e,t,r),P.setUniforms(t,i),P.drawBufferInfo(e,r)}}function s0(e){const t=e.position,n=e.normal,r=e.texcoord,o=e.indices,c=new Float32Array(n.length),i=new Array(t.length/3).fill(0);for(let a=0;a<o.length;a+=3){const s=t.slice(o[a+0]*3,o[a+0]*3+3),u=t.slice(o[a+1]*3,o[a+1]*3+3),l=t.slice(o[a+2]*3,o[a+2]*3+3),m=r.slice(o[a+0]*2,o[a+0]*2+2),f=r.slice(o[a+1]*2,o[a+1]*2+2),y=r.slice(o[a+2]*2,o[a+2]*2+2),x=Ar.subtract(u,s),_=Ar.subtract(l,s),E=hr.subtract(f,m),T=hr.subtract(y,m),p=1/(E[0]*T[1]-T[0]*E[1]);c[o[a+0]*3+0]+=p*(T[1]*x[0]-E[1]*_[0]),c[o[a+0]*3+1]+=p*(T[1]*x[1]-E[1]*_[1]),c[o[a+0]*3+2]+=p*(T[1]*x[2]-E[1]*_[2]),c[o[a+1]*3+0]+=p*(T[1]*x[0]-E[1]*_[0]),c[o[a+1]*3+1]+=p*(T[1]*x[1]-E[1]*_[1]),c[o[a+1]*3+2]+=p*(T[1]*x[2]-E[1]*_[2]),c[o[a+2]*3+0]+=p*(T[1]*x[0]-E[1]*_[0]),c[o[a+2]*3+1]+=p*(T[1]*x[1]-E[1]*_[1]),c[o[a+2]*3+2]+=p*(T[1]*x[2]-E[1]*_[2]),i[o[a+0]]+=1,i[o[a+1]]+=1,i[o[a+2]]+=1}for(let a=0;a<i.length;a++)c[a*3+0]/=i[a],c[a*3+1]/=i[a],c[a*3+2]/=i[a];return{...e,tangent:c}}const er={"hello-triangle":Qf,"twgl-cube":t0,textures:o0,"normal-mapping":a0};document.querySelector("#app").innerHTML=`
  <select id="example" style="position: absolute">
    ${Object.keys(er).map(e=>`<option value="${e}">${e}</option>`).join(`
`)}
  </select>
  <div id="container"></div>
`;const Le=document.querySelector("#example"),u0=new URLSearchParams(location.search),br=u0.get("example");br!==null&&(Le.value=br);Le.addEventListener("change",()=>{const e=new URL(location.href);e.searchParams.set("example",Le.value),history.replaceState({},"",e),Fr(er[Le.value],document.querySelector("#container"))});Fr(er[Le.value],document.querySelector("#container"));
